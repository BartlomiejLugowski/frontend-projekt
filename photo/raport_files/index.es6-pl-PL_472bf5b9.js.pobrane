((e,t)=>{for(var a in t)e[a]=t[a]})(window,(e=>{function t(t){for(var a,s,n=t[0],l=t[1],r=0,c=[];r<n.length;r++)s=n[r],{}.hasOwnProperty.call(i,s)&&i[s]&&c.push(i[s][0]),i[s]=0;for(a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(o&&o(t);c.length;)c.shift()()}var a={},i={8:0};function s(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=e=>{var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((t,s)=>{a=i[e]=[t,s]});t.push(a[2]=n);var l,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=(e=>s.p+""+({0:"ChatWindow",1:"Chat",2:"ChatMinimized",3:"EndChat",4:"Sound",5:"Tooltip",6:"getAgentsAvailability",7:"getInitialConversation",9:"initializeExistingConversation",10:"startNewChatSession",11:"vendors~Chat"}[e]||e)+".es6-pl-PL_472bf5b9.js")(e),0!==r.src.indexOf(window.location.origin+"/")&&(r.crossOrigin="anonymous");var o=Error();l=t=>{r.onerror=r.onload=null,clearTimeout(c);var a=i[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",o.name="ChunkLoadError",o.type=s,o.request=n,a[1](o)}i[e]=void 0}};var c=setTimeout(()=>{l({type:"timeout",target:r})},12e4);r.onerror=r.onload=l,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=a,s.d=(e,t,a)=>{s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=(e,t)=>{if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,(t=>e[t]).bind(null,i));return a},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,"a",t),t},s.o=(e,t)=>({}.hasOwnProperty.call(e,t)),s.p="https://assets.allegrostatic.com/sc-14778/",s.oe=e=>{throw console.error(e),e};var n=window.webpackJsonp_26211=window.webpackJsonp_26211||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var r=0;r<n.length;r++)t(n[r]);var o=l;return s(s.s=0)})({0(e,t,a){e.exports=a("WdQY")},"2vv7"(e,t){e.exports=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");for(var a,i=e+"",s="",n=!!t&&!!t.extended,l=!!t&&!!t.globstar,r=!1,o=t&&"string"==typeof t.flags?t.flags:"",c=0,d=i.length;c<d;c++)switch(a=i[c]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":s+="\\"+a;break;case"?":if(n){s+=".";break}case"[":case"]":if(n){s+=a;break}case"{":if(n){r=!0,s+="(";break}case"}":if(n){r=!1,s+=")";break}case",":if(r){s+="|";break}s+="\\"+a;break;case"*":for(var h=i[c-1],p=1;"*"===i[c+1];)p++,c++;var g=i[c+1];l?!(p>1)||"/"!==h&&void 0!==h||"/"!==g&&void 0!==g?s+="([^/]*)":(s+="((?:[^/]*(?:/|$))*)",c++):s+=".*";break;default:s+=a}return o&&~o.indexOf("g")||(s="^"+s+"$"),RegExp(s,o)}},"7QpB"(e,t,a){a.d(t,"a",()=>i);const i="chatPlugin"},"7ibh"(e,t,a){a.d(t,"a",()=>n);const i={pl:"pl-PL",en:"en-US",cs:"cs-CZ"},s=i.pl;function n(){const e=document.documentElement.getAttribute("lang");return i[e]||s}},OHx9(e,t,a){a.d(t,"a",()=>i);const i=e=>console.warn(e)},QJko(e,t,a){a.d(t,"c",()=>i),a.d(t,"b",()=>s),a.d(t,"a",()=>n);const i=()=>{},s=()=>null,n=()=>Promise.resolve()},Qa0R(e,t,a){let i,s,n,l,r,o;a.d(t,"d",()=>i),a.d(t,"e",()=>s),a.d(t,"c",()=>n),a.d(t,"f",()=>l),a.d(t,"a",()=>r),a.d(t,"b",()=>o),(e=>{e.CustomMessage="CustomMessage",e.FileUploadStarted="FileUploadStarted",e.FileUploaded="FileUploaded",e.Images="Images",e.OrderCarouselItemSelected="OrderCarouselItemSelected",e.ParticipantJoined="ParticipantJoined",e.ParticipantLeft="ParticipantLeft",e.QuickReplySelected="QuickReplySelected",e.SelectOrderCarouselItem="SelectOrderCarouselItem",e.Text="Text",e.TextAndQuickReplies="TextAndQuickReplies",e.TypingStarted="TypingStarted",e.TypingStopped="TypingStopped",e.UnrecognizedMessage="UnrecognizedMessage"})(i||(i={})),(e=>{e.Agent="Agent",e.Chatbot="Chatbot",e.Client="Client",e.System="System"})(s||(s={})),(e=>{e.SelectOrderCarouselItem="SelectOrderCarouselItem",e.SelectQuickReply="SelectQuickReply",e.SendText="SendText",e.StartTyping="StartTyping",e.StopTyping="StopTyping"})(n||(n={})),(e=>{e.IMMEDIATE="IMMEDIATE",e.NONE="NONE",e.USER_TRIGGERED="USER_TRIGGERED"})(l||(l={})),(e=>{e.DEPENDENT="DEPENDENT",e.STANDALONE="STANDALONE"})(r||(r={})),(e=>{e.ERROR="ERROR",e.USER_REQUEST="USER_REQUEST"})(o||(o={}))},UXc6(e,t,a){a.d(t,"b",()=>i),a.d(t,"d",()=>s),a.d(t,"e",()=>n),a.d(t,"a",()=>l),a.d(t,"c",()=>r);const i="application/vnd.allegro.internal.v3+json",s=3e3,n=6e4,l=3e3,r=(()=>{const{hostname:e}=window.location;return/local|alledc|sandbox/.test(e)})()?"https://gen-chat-call.allegro.pl.allegrosandbox.pl:9090":"https://gen-chat-call.allegro.pl:9090"},Uo1Q(e,t,a){a.d(t,"a",()=>i);const i="chat.preferences"},W3RQ(e,t,a){a.d(t,"a",()=>i);const i={ADS:"Platforma_PA_Ads",ALLEGROPAY_MA_PLATFORMA:"platforma_kl_ma_allegropay",ALLEGROPAY_METODY_PLATFORMA:"platforma_kl_metody_allegropay",DELIVERY_METHODS:"fk_kl_metody_dostawy_bot",FK_PA_WOSP_ZASADY_OFERTY:"fk_pa_wosp_zasady_oferty",FK_PA_ZARZADZANIE_OPIS_OFERTY:"fk_pa_zarzadzanie_opis_oferty",FOD_BOT:"platforma_kl_fod_bot",LEAD_GENERATION:"platforma_pa_leadgeneration",PLATFORMA_BOT:"platforma_kl_for_bot",REGISTER:"platforma_kl_rejestracja_zwykle",REGISTER_PARTNER:"platforma_pa_rejestracja_firma"}},WdQY(e,t,a){a.r(t);var i=a("rRL6"),s=a.n(i),n=a("7QpB"),l=a("Qa0R"),r=a("kmig"),o=a("UXc6"),c=a("QJko"),d=a("ivgV"),h=a("a8J+"),p=a("vld/"),g=a("OHx9"),b=a("uS+1"),A=a("7ibh"),u=a("yBFf"),v=a("ltJv");const S=(()=>{try{return(({pluginName:e,clientImplementationVersion:t})=>{try{return JSON.parse(window.document.querySelector(`script[data-serialize-plugin-name="${e}"][data-civ="${t}"]`).textContent)}catch(a){return window.opbox.reportError(Error(`Missing serialized props of plugin "${e}", with civ "${t}"`)),{}}})({pluginName:n.a,clientImplementationVersion:s.a})}catch(e){return{chatConfiguration:{enabled:!0,chatAlias:""}}}})(),m=new class{constructor(e){this.state=void 0,this.props=void 0,this.agentsAvailabilityCheckInterval=void 0,this.registeredFunctions=void 0,this.setState=e=>{this.state=Object.assign({},this.state,e)},this.loadComponent=(e,t)=>{Promise.all([a.e(11),a.e(1)]).then(a.bind(null,"xAxt")).then(({renderChat:a})=>a(e,t)),this.setState({loaded:!0})},this.props=e,this.state={loaded:!1,chatAgentsAvailable:!1,callbackAsapAgentsAvailable:!1,callbackScheduleAgentsAvailable:!1,callbackAlias:"",chatInProgress:!1,chatAlias:e.chatConfiguration.chatAlias||"",gmsServiceId:"",host:o.c,lang:Object(A.a)(),medaliaScenario:"none"},this.registeredFunctions={closeChatWindow:c.c,endChatSession:c.c,endCallbackSession:c.c,setChatStartedMode:c.c,startCallbackSession:c.c},this.subscribeEvents(),this.initialize()}async initialize(){let e=null;if(this.isPluginInitialized()){const{getInitialConversation:t}=await a.e(7).then(a.bind(null,"TWqt"));e=await t().catch(()=>null)}if(null!==e){this.state.chatInProgress=!0;const{initializeExistingConversation:t}=await a.e(9).then(a.bind(null,"uPqD")),i=await t(e,this.state.chatAlias);this.loadComponent(i,e),this.registeredFunctions.setChatStartedMode()}else Object(p.a)(),this.initializeStandaloneChat()}subscribeEvents(){b.a.subscribe("startConversation",e=>{this.updateChatAlias(e),this.startNewChatSession()}),b.a.subscribe("closeWindow",()=>{this.registeredFunctions.closeChatWindow(),this.setState({chatInProgress:!1})}),b.a.subscribe("disconnected",()=>{this.registeredFunctions.endChatSession(),this.initializeStandaloneChat()}),b.a.subscribe("updateMedaliaScenario",e=>{this.setState({medaliaScenario:e})})}initializeStandaloneChat(){const{alias:e,type:t}=Object(u.a)();e&&t&&(t===v.a.CHAT&&this.startAgentsAvailabilityChecker({chatAlias:e,host:o.c,callbackAlias:this.state.callbackAlias,lang:Object(A.a)(),gmsServiceId:this.state.gmsServiceId}),this.state.loaded||this.loadComponent({chatAlias:e,chatType:t,displayModeState:Object(h.a)(r.b.Minimized),chatInstance:l.a.STANDALONE,chatLocation:d.b.Other}))}startNewChatSession(e){const{chatAlias:t,chatInProgress:i}=this.state;return i?(Object(g.a)("Conversation already started."),Promise.resolve()):t?a.e(10).then(a.bind(null,"yAn0")).then(({startNewChatSession:t})=>t(this.state,this.setState,this.loadComponent,e)):(Object(g.a)(`Conversation wasn't created. Chat alias "${t}" is incorrect.`),Promise.resolve())}updateAliases({callbackAlias:e=this.state.callbackAlias,chatAlias:t=this.state.chatAlias,gmsServiceId:a=this.state.gmsServiceId,host:i=this.state.host,lang:s=this.state.lang}){this.setState({callbackAlias:e||"",chatAlias:t||"",gmsServiceId:a,host:i,lang:s})}updateAvailability({callbackAsapAgentsAvailable:e,callbackScheduleAgentsAvailable:t,chatAgentsAvailable:a}){this.setState({chatAgentsAvailable:a,callbackScheduleAgentsAvailable:t,callbackAsapAgentsAvailable:e})}isPluginInitialized(){return!("chatConversationProbablyActive"in this.props&&!Object(p.c)())||this.props.chatConversationProbablyActive}startAgentsAvailabilityChecker(e){this.updateAliases(e);const t=()=>{const e={callbackAsapAgentsAvailable:!1,chatAgentsAvailable:!1,callbackScheduleAgentsAvailable:!1};this.updateAvailability(e),b.a.emit("agentsAvailability",e)};var a,i;this.clearAgentsAvailabilityCheckInterval(),this.agentsAvailabilityCheckInterval=(a=()=>this.checkAgentsAvailability(e).catch(t),i=o.a,a(),setInterval(a,i))}clearAgentsAvailabilityCheckInterval(){this.agentsAvailabilityCheckInterval&&(clearInterval(this.agentsAvailabilityCheckInterval),this.agentsAvailabilityCheckInterval=void 0)}checkAgentsAvailability(e){if(!e.chatAlias&&!e.callbackAlias)throw Error("No callback and chat aliases.");return this.updateAliases(e),a.e(6).then(a.bind(null,"teFn")).then(({getAgentsAvailability:t})=>{const{callbackAlias:a,chatAlias:i,host:s,lang:n}=this.state;return t(Object.assign({callbackAlias:a,chatAlias:i,host:s,lang:n},e))}).then(e=>{this.updateAvailability(e),b.a.emit("agentsAvailability",e)})}registerFunctions(e){this.registeredFunctions=Object.assign({},this.registeredFunctions,e)}updateChatAlias(e=""){this.setState({chatAlias:e})}displayState(e){this.state.chatInProgress||e!==r.b.Normal?Object.values(r.b).includes(e)?b.a.emit("updateDisplayState",e):Object(g.a)("Passed state is incorrect."):Object(g.a)("You can't display chat if conversation isn't started.")}tooltip(e){b.a.emit("updateTooltipVisibility",!!e.visibility)}getPublicApi(){const e={updateChatAlias:this.updateChatAlias.bind(this),startNewChatSession:this.startNewChatSession.bind(this),startAgentsAvailabilityChecker:this.startAgentsAvailabilityChecker.bind(this),clearInterval:this.clearAgentsAvailabilityCheckInterval.bind(this),registerFunctions:this.registerFunctions.bind(this),displayState:this.displayState.bind(this),tooltip:this.tooltip.bind(this),eventBus:b.a};return Object.defineProperty(e,"chatAgentsAvailable",{get:()=>this.state.chatAgentsAvailable}),Object.defineProperty(e,"chatInProgress",{get:()=>this.state.chatInProgress}),Object.defineProperty(e,"callbackScheduleAgentsAvailable",{get:()=>this.state.callbackScheduleAgentsAvailable}),Object.defineProperty(e,"callbackAsapAgentsAvailable",{get:()=>this.state.callbackAsapAgentsAvailable}),Object.defineProperty(e,"callbackAlias",{get:()=>this.state.callbackAlias}),Object.defineProperty(e,"gmsServiceId",{get:()=>this.state.gmsServiceId}),Object.defineProperty(e,"medaliaScenario",{get:()=>this.state.medaliaScenario}),Object.defineProperty(e,"startCallbackSession",{get:()=>this.registeredFunctions.startCallbackSession.bind(this)}),Object.defineProperty(e,"endCallbackSession",{get:()=>this.registeredFunctions.endCallbackSession.bind(this)}),e}}(S);window.opbox.plugin.register({name:n.a},m.getPublicApi())},"a8J+"(e,t,a){a.d(t,"a",()=>i);const i=e=>({timestamp:(new Date).setMilliseconds(0),value:e})},ivgV(e,t,a){let i,s;a.d(t,"a",()=>i),a.d(t,"b",()=>s),(e=>{e.Awaiting="Awaiting",e.Connected="Connected",e.Disconnected="Disconnected",e.Ended="Ended",e.Error="Error"})(i||(i={})),(e=>{e.ContactForm="ContactForm",e.Other="Other"})(s||(s={}))},kmig(e,t,a){let i,s,n,l,r,o,c,d,h;a.d(t,"f",()=>i),a.d(t,"a",()=>s),a.d(t,"d",()=>n),a.d(t,"c",()=>l),a.d(t,"i",()=>r),a.d(t,"h",()=>o),a.d(t,"b",()=>c),a.d(t,"g",()=>d),a.d(t,"e",()=>h),(e=>{e.missing="missing",e.selectable="selectable",e.selected="selected"})(i||(i={})),(e=>{e.agent="agent",e.chatbot="chatbot"})(s||(s={})),(e=>{e.EndChat="EndChat",e.None="None"})(n||(n={})),(e=>{e.DELIVERED="delivered",e.INVALID="invalid",e.PENDING="pending"})(l||(l={})),(e=>{e.hover="hover",e.hoverOnce="hoverOnce",e.none="none"})(r||(r={})),(e=>{e.BLANK="_blank",e.SELF="_self",e.TOP="_top"})(o||(o={})),(e=>{e.Minimized="Minimized",e.Normal="Normal"})(c||(c={})),(e=>{e.Off="Off",e.On="On"})(d||(d={})),(e=>{e.ERROR="error",e.INFORMATION="information",e.SUCCESS="success"})(h||(h={}))},ltJv(e,t,a){let i;a.d(t,"a",()=>i),(e=>{e.CHAT="CHAT",e.CHATBOT="CHATBOT",e.NONE=""})(i||(i={}))},rRL6(e,t){e.exports="c70"},"uS+1"(e,t,a){a.d(t,"a",()=>i);const i=new class{constructor(){this.listeners=[],this.memoizedStream=new Map}emit(e,t){this.memoizedStream.set(e,t),this.listeners.filter(t=>t.event===e).forEach(e=>setTimeout(()=>e.subscriber(t),0))}subscribe(e,t){const a={event:e,subscriber:t};if(this.listeners=[...this.listeners,a],this.memoizedStream.has(e)){const t=this.memoizedStream.get(e);this.emit(e,t)}return{unsubscribe:this.unsubscribe.bind(this,a)}}unsubscribe(e){this.listeners=this.listeners.filter(t=>t!==e)}}},"vld/"(e,t,a){a.d(t,"c",()=>s),a.d(t,"b",()=>n),a.d(t,"d",()=>l),a.d(t,"a",()=>r);var i=a("Uo1Q");const s=()=>null!=localStorage.getItem(i.a),n=e=>{const t=localStorage.getItem(i.a)||"";try{return JSON.parse(t).conversations[e]||{}}catch(a){return{}}},l=(e,t)=>{const a=n(e),s={conversations:{[e]:Object.assign({},a,t)}};localStorage.setItem(i.a,JSON.stringify(s))},r=()=>localStorage.removeItem(i.a)},yBFf(e,t,a){a.d(t,"a",()=>g);var i=a("2vv7"),s=a.n(i);const n={hash:!0,search:!0,trailingSlash:!0};var l=a("7ibh"),r=a("ltJv");const o=e=>{const[t,a]=e.split("|");return{url:t,lang:a}},c={alias:"",type:r.a.NONE},d={endpoints:[]};var h=a("W3RQ");const p=(e,t,a,i,s)=>[Object.entries(e).flatMap(([e,t])=>t.map(t=>({lang:t,endpoint:e}))),{alias:t,type:a,strict:i,extended:s}],g=(({initialData:e})=>{const t=(()=>{const e=`${window.location.protocol}//${window.opbox.config.baseDomain}`,t=(e={})=>((e={})=>{const t=Object.assign({},n,e);let a=window.location.origin+window.location.pathname;return!t.trailingSlash&&a.endsWith("/")&&(a=a.slice(0,-1)),t.search&&(a+=window.location.search),t.hash&&(a+=window.location.hash),a})(Object.assign({hash:!1,search:!1,trailingSlash:!1},e)),a=new Map;return{configuration:{addEndpoint(t,i){t.forEach(t=>{const{endpoint:s,lang:n}=((e,t)=>"string"==typeof e?{endpoint:e,lang:void 0}:e)(t),l=((e,t)=>{const a=new String(t?`${e}|${t}`:e);return a.KEY_TYPE="UrlLangKey",a})(`${e}/${s}`,n);a.set(l,i)})}},getChatAliasWithType:()=>()=>(()=>{const e=window.opbox.config.language||Object(l.a)();let i;for(const[n,l]of a.entries()){const{lang:a,url:r}=o(n),c=s()(r,{extended:!!l.extended}),d=!!l.strict,h=c.test(t({hash:d,search:d})),p=r===window.location.host;if(h||p){const t=!a||a===e;!i&&t&&(i=[{url:r,lang:a},{alias:l.alias,type:l.type}])}}return i?i[1]:c})()}})();return Object.assign({},d,e).endpoints.forEach(e=>{t.configuration.addEndpoint(...e)}),t})({initialData:{endpoints:[p({rejestracja:["pl-PL"],"rejestracja/konto-firmowe/nowe-konto":["pl-PL"]},h.a.PLATFORMA_BOT,r.a.CHATBOT),p({rejestracja:["en-US"],"rejestracja/konto-firmowe/nowe-konto":["en-US"]},h.a.REGISTER,r.a.CHAT),p({"transakcja/*/zamowienie":["pl-PL"]},h.a.FOD_BOT,r.a.CHATBOT),p({"kampania/zacznij-sprzedaz":["pl-PL"],"artykuly/sprzedajacy":["pl-PL"]},h.a.LEAD_GENERATION,r.a.CHAT),p({"moje-allegro/zakupy/allegro-pay#start-onboarding?referer=HOMEPAGE_WELCOME_DESKTOP":["pl-PL"],"moje-allegro/zakupy/allegro-pay#start-onboarding?referer=Usermenu_Header_Badge_Info":["pl-PL"],"moje-allegro/zakupy/allegro-pay#start-onboarding?referer=SHOWOFFER":["pl-PL"]},h.a.ALLEGROPAY_MA_PLATFORMA,r.a.CHAT,!0),p({"metody-platnosci/allegro-pay#aktywacja?referrer=LANDING_KV":["pl-PL"]},h.a.ALLEGROPAY_METODY_PLATFORMA,r.a.CHAT,!0),p({"ads/panel{,/*}":["pl-PL"]},h.a.ADS,r.a.CHAT,!1,!0),p({"@allegro/opbox-plugin-chat/*/independent-bot":["pl-PL","en-US","cs-CZ"]},h.a.DELIVERY_METHODS,r.a.CHATBOT),p({"@allegro/opbox-plugin-chat/*/independent":["pl-PL","en-US","cs-CZ"]},h.a.REGISTER,r.a.CHAT)]}}).getChatAliasWithType()}}));
//# sourceMappingURL=index.es6-pl-PL_472bf5b9.js.map