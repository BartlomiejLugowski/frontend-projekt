((e,t)=>{for(var o in t)e[o]=t[o]})(window,(e=>{var t={};function o(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=(e,t,r)=>{o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=(e,t)=>{if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,(t=>e[t]).bind(null,i));return r},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,"a",t),t},o.o=(e,t)=>({}.hasOwnProperty.call(e,t)),o.p="https://assets.allegrostatic.com/sc-12824/",o(o.s=0)})({0(e,t,o){e.exports=o("WdQY")},WdQY(e,t,o){function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.r(t),o.d(t,"default",()=>n);const i=[{locationHref:/moje-allegro\/sprzedaz\/centrum-znizek/,name:"bundles"},{locationHref:/my-allegro\/sales\/discount-center/,name:"bundles"},{locationHref:/moje-allegro\/zakupy\/monety/,name:"coins"},{locationHref:/opinie-produktowe\/dodaj-opinie/,name:"reviews"},{locationHref:/moje-allegro\/sprzedaz\/abonamenty/,name:"subscriptions"},{locationHref:/moje-allegro\/moje-konto\/centrum-wiadomosci\/wiadomosci/,name:"messageCenter"},{locationHref:/my-allegro\/my-account\/message-center\/messages/,name:"messageCenter"}];class n{constructor(e=window){r(this,"pages",i),r(this,"isRequestPending",!1),r(this,"listeners",[]);const{opbox:{edge:t,reportError:o},location:{href:n}}=e;this.reportError=o,this.edge=t,this.locationHref=n}handleResponse(e){return e.then(({data:e})=>this.processResponseData(e)).catch(e=>{e&&0!==e.status&&this.reportError(e)}).finally(()=>{this.isRequestPending=!1})}processResponseData(e){this.values=e,this.listeners.forEach(t=>{t(e)})}requestNotifications(e){return this.isRequestPending=!0,this.edge.get((e=>"/notification-badges"+(e?"?origin="+e:""))(e),{headers:{},withCredentials:!0})}getNotificationNameForCurrentPage(){const{name:e=""}=this.pages.find(({locationHref:e})=>e.test(this.locationHref))||{};return e}fetchNotificationsForCurrentPage(){const e=this.getNotificationNameForCurrentPage(),t=this.requestNotifications(e);this.handleResponse(t)}reset(e){const t=this.requestNotifications(e);return this.handleResponse(t)}getNotifications(e,t=!1){if("function"!=typeof e)throw Error("Callback is not a function!");this.listeners.push(e),this.isRequestPending||(this.values&&!t?e(this.values):this.fetchNotificationsForCurrentPage())}}window.opbox.services.register({serviceName:"opbox-notification-service"},n)}}));
//# sourceMappingURL=index.es6_ee44716d.js.map