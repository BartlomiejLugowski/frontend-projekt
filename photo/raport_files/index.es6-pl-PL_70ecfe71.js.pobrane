((t,e)=>{for(var a in e)t[a]=e[a]})(window,(t=>{var e={};function a(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=(t,e,r)=>{a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=(t,e)=>{if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,(e=>t[e]).bind(null,s));return r},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,"a",e),e},a.o=(t,e)=>({}.hasOwnProperty.call(t,e)),a.p="https://assets.allegrostatic.com/sc-12439/",a(a.s=0)})({0(t,e,a){t.exports=a("O14P")},O14P(t,e,a){function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.r(e),a.d(e,"OpboxCartStatus",()=>Yt);var s=a("rRL6"),i=a.n(s);const n={"pl-PL":{CART_LABEL:[["",["Koszyk"]]],CART_ITEMS_LABEL:[["",["Koszyk ({{count}} przedmiot)","Koszyk ({{count}} przedmioty)","Koszyk ({{count}} przedmiotów)"]]],CART_TOTAL_VALUE:[["",["wartość koszyka"]]],YOUR_CART:[["",["Twój koszyk"]]],SELLER_TOTAL_ITEMS:[["",["{{count}} przedmiot od ","{{count}} przedmioty od ","{{count}} przedmiotów od "]]],BUNDLE:[["",["zestaw"]]],PER_PIECE:[["",["za sztukę {{amount}}"]]],DELIVERY_GRANTED_SMART:[["",["Masz darmową dostawę Smart! od tego sprzedającego!"]]],DELIVERY_GRANTED_FREE_FROM:[["",["Masz darmową dostawę od tego sprzedającego!"]]],DELIVERY_HINT_SMART_LABEL:[["",["Do darmowej dostawy Smart!"]]],DELIVERY_HINT_FREE_FROM_LABEL:[["",["Do darmowej dostawy od tego sprzedającego:"]]],DELIVERY_MISSING_AMOUNT:[["",["brakuje {{amount}}"]]],DELIVERY_GRANTED_SMART_SHORT:[["",["Masz darmową dostawę Smart!"]]],DELIVERY_HINT_SMART_LABEL_SHORT:[["",["Do darmowej dostawy Smart!"]]],DELIVERY_HINT_FREE_FROM_LABEL_SHORT:[["",["Do darmowej dostawy od tego sprzedającego"]]],DELIVERY_FREE_FROM_BASKET_VALUE:[["",["przy zakupach od {{amount}} łącznie od"]]],DELIVERY_FREE_FROM_BASKET_VALUE_BADGE:[["",["wielu sprzedających"]]],TOTAL_VALUE:[["",["razem"]]],MORE_FROM_SELLER:[["",["dodaj coś jeszcze od tego sprzedającego"]]],EMPTY_CART_HEADER:[["",["Twój koszyk jest pusty"]]],EMPTY_CART_LABEL:[["",["Koszyk jest pusty"]]],EMPTY_CART_PARA_1:[["",["Dodaj do koszyka przedmioty i kup je szybko i wygodnie."]]],EMPTY_CART_PARA_2:[["",["Przez koszyk możesz kupić za jednym razem do 50 przedmiotów od różnych sprzedawców."]]],GO_TO_CART:[["",["pokaż koszyk"]]],GO_TO_CHECKOUT:[["",["do kasy"]]],FROM:[["",["z"]]],ALLEGRO_WAREHOUSE:[["",["Magazynu Allegro"]]],MORE_FROM_ALLEGRO_WAREHOUSE:[["",["Dodaj coś jeszcze z Magazynu Allegro"]]]}},o=/({{[^}]+}}|{%[^%}]+%})/g,m=/({{[^}]+}})/g,_=/({%[^%}]+%})/g,l=/({{\s*|\s*}}|{%\s*|\s*%})/g;function c(t,e=""){if("string"==typeof t)throw Error("Translation has to be an array");return t.find(t=>t[0]===e)[1]}const d=(t,e,a)=>{const r=n["pl-PL"][t];if(!r)throw Error(`Missing translation for lang "pl-PL" and key "${t}"`);return e?((t,e,a)=>{let r=c(t,e.context);return parseInt(e.count,10)>=0?r=((t,e)=>{const a=1==(r=e)?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2;var r;return"boolean"!=typeof a?t[a]:t[a?1:0]})(r,e.count):[r]=r,((t,e,a)=>{if(a){let a=0;return t.split(o).map(r=>{if(r.match(_)){const s=e.formatters[a];if(s)return a+=1,s(r.replace(l,""));throw Error(`Missing translation formatter for "${t}"`)}return r.match(m)?e[r.replace(l,"")]:r})}const r=t.match(o);let s=0;return r?r.reduce((a,r)=>{const i=r.replace(l,"");if(r.match(_)){const n=e.formatters[s];if(n)return s+=1,a.replace(r,n(i));throw Error(`Missing translation formatter for "${t}"`)}return r.match(m)?a.replace(r,e[i]):a},t):t})(r,e,a)})(r,e,a):c(r)[0]},u={headers:{Accept:"application/vnd.allegro.public.v6+json"},withCredentials:!0,disableDefaultHeaders:!0};var p={get(){return window.opbox.edge.get("/carts/header",u)},getPreview(){return window.opbox.edge.get("/carts?decorators=CART,SHIPMENT&cached=true",u)}};const h={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},E=/<|>|&|"|'/g,v=(RegExp(Array.from("javascript:",t=>t+"[\\n\\r\\t]*").join(""),"ig"),t=>h[t]);class g{constructor(t,e){this.$=t[0];for(let a=0;a<e.length;a++){const r=e[a];if(Array.isArray(r))for(let t=0;t<r.length;t++)this.$esc(r[t]);else this.$esc(r);this.$+=t[a+1]}}$esc(t){this.$+=t instanceof g?t.$:(t+"").replace(E,v)}toString(){return this.$}}var y=(t,...e)=>new g(t,e);function f(t){return t.rebate?t.rebate.bundle?{id:t.rebate.id,type:"BUNDLE"}:t.rebate.crossMultipack?{id:t.rebate.id,type:"CROSS_MULTIPACK"}:t.rebate.multipack?{id:t.rebate.id,type:"MULTIPACK"}:null:null}function R(t){return t.reduce((t,e)=>[...t,...e.items.map(t=>{var e,a;return{id:(null===(e=t.offers.find(t=>t.primary))||void 0===e?void 0:e.id)||t.offers[0].id,quantity:t.quantity.selected,rebateId:null===(a=f(t))||void 0===a?void 0:a.id}})],[])}function w(t){var e,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=w(t[e]))&&(r&&(r+=" "),r+=a);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}var T=function(){for(var t,e,a=0,r="";a<arguments.length;)(t=arguments[a++])&&(e=w(t))&&(r&&(r+=" "),r+=e);return r};let L,$=t=>t;function A(t,e){const a=T("mp0t_ji mgn2_12 mqu1_16 mgmw_9u msbw_2 mldj_2 mtag_2 mm2b_2 msa3_z4 mg9e_2 mj7a_2 mvrt_4 mh36_4",{msts_d2:"free-delivery"===e,"_5537a_Dx-Ld":"smart"===e});return y(L||(L=$`<span class="${0}" data-role="badge">${0}</span>`),a,t)}let b,O,S,k,q=t=>t;function C({offers:t,originalPrice:e,price:a,unitPrice:r,selected:s,available:i,quantity:n}){const o=!s||!i.status,m=t.length>1,[{url:_}]=t,l=T("mp4t_16 mpof_ki mgn2_14 mp0t_0a mgmw_wo mqu1_21 mj9z_5r mli8_k4 mqen_m6 l16fh lcjck",{mj6k_yx:o}),c=m?"mpof_ki m7f5_6m m389_6m _5537a_pXmo-":"",u={price:a,originalPrice:e,type:"secondary",unitPrice:n.selected>1?r:null};return y(b||(b=q`<a href="${0}" class="${0}" data-analytics-clickable data-analytics-click-label="item" data-analytics-click-value="${0}"><div class="${0}">${0} ${0}</div><div class="${0}">${0}</div><div class="${0}">${0}</div></a>`),_,l,t[0].name,"mpof_ki mwdn_1 m7f5_6m m389_6m _5537a_xHwfr",m?y(O||(O=q`<span class="${0}">${0}</span>`),"mgmw_06 mgn2_13 mqu1_16 mtsp_ib m7er_k4",d("BUNDLE")):"",t.map(({name:t,photo:e})=>y(S||(S=q`<div class="${0}">${0}</div>`),c,((t,e,a="small")=>{var r;const s=T("mpof_ki m7f5_6m m389_6m",{_5537a_saALQ:"small"===a,_5537a_FdMzh:"extra-small"===a});if(null==t||null===(r=t.small)||void 0===r?void 0:r.url){const r="small"===a?t.small.url:t.extraSmall.url;return y(I||(I=x`<div class="${0}"><div class="${0}"><img src="${0}" alt="${0}" class="${0}" /></div></div>`),s,z,r,e,"m7er_56 mse2_56 mpof_z0 munh_56 m3h2_56 _5537a_P5Wht")}return y(j||(j=x`<div class="${0}"><div class="${0}"><img class="m-placeholder m-placeholder--small" src="${0}" alt="${0}" /></div></div>`),s,z,N,e)})(e,t,m?"extra-small":"small"))),"mp4t_16 mr3m_1 _5537a_wvcRi",t.map(t=>y(k||(k=q`<div class="${0}"><div class="${0}">${0} ×</div><div class="${0}">${0}</div></div>`),"mpof_ki _5537a_fzRFY","mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16 m3h2_8 mzmg_f9 _5537a_jcPRg",t.quantity||n.selected,"mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16 _5537a_avScD",t.name)),"mzmg_f9 mp4t_16 _5537a_2ZU2v",Q(u))}var M=a("QydH"),z="m7er_k4 munh_56 m3h2_56";let I,j,x=t=>t;const N=M.a,F=new Intl.NumberFormat("pl",{minimumFractionDigits:2,maximumFractionDigits:2});function D(t){return F.format(t)}function P(t){return{PLN:"zł",EUR:"€",CZK:"Kč"}[t]}let H,U,V,B,Y,G=t=>t,W=t=>t,K=t=>t;function Q({price:{amount:t,currency:e},type:a="primary",originalPrice:r,unitPrice:s}){const[i,n=""]=t.split(/[.,]/),o=i.match(/.{1,3}(?=(.{3})*$)/g),m="secondary"===a?"mli8_k4 msa3_z4 mqu1_1 mp0t_ji m9qz_yo mgmw_qw mgn2_21 mgn2_25_s _5537a_xJ4bc":"mli8_k4 msa3_z4 mqu1_1 mp0t_ji m9qz_yo mgmw_qw mgn2_27 mgn2_30_s _5537a_Z6gQx",_="secondary"===a?"mgn2_16 mgn2_17_s m9qz_yq _5537a_wTcE9":"mgn2_19 mgn2_21_s m9qz_yq _5537a_Qkkei",l=o.slice(0,-1).map(t=>y(V||(V=K`<span class="${0}">${0}</span>`),"_5537a_xz0iF",t)).concat(y(B||(B=K`${0},`),o[o.length-1]));return y(Y||(Y=K` ${0}<div class="${0}">${0}<span class="${0}">${0} ${0}</span></div>${0} `),((t,e)=>e&&e.amount!==t?y(H||(H=G`<s class="${0}">${0} ${0}</s>`),"mgmw_3z prircq",D(e.amount),P(e.currency)):"")(t,r),m,l,_,n.padEnd(2,0),P(e),(t=>{if(!t)return"";const e=`${D(t.amount)} ${P(t.currency)}`;return y(U||(U=W`<div class="${0}">${0}</div>`),"mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16",d("PER_PIECE",{amount:e}))})(s))}let X,J=t=>t;function Z(t,e,a="primary"){return y(X||(X=J`<div class="${0}"><span class="${0}">${0}</span><div class="${0}">${0}</div></div>`),"mpof_ki m389_a6 munh_56","mp0t_0a mli8_k4 mgn2_13 mqu1_16 mtsp_ib mgmw_06",t,"munh_56 munh_8_s",Q({price:e,type:a}))}let tt,et,at,rt=t=>t;function st(t,e,a){return y(at||(at=rt`<div class="${0}">${0}<span class="${0}">${0}</span>${0}</div>`),"mpof_ki mp4t_16 m389_6m",(t=>{const e=y(tt||(tt=rt`<img src="https://assets.allegrostatic.com/freebox/icons/FREEBOX_NOMARGIN.svg" class="${0}" alt="SMART" />`),"mpof_z0 _5537a_gVeYP");return t?y(et||(et=rt`<picture><source media="(prefers-color-scheme: dark)" srcset="https://assets.allegrostatic.com/freebox/icons/FREEBOX_NOMARGIN_DARK.svg" />${0}</picture>`),e):e})(a),"mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16 _5537a_8c-wW",t,e?A(e,"smart"):"")}let it,nt=t=>t;function ot(t){const e=d(t?"DELIVERY_HINT_FREE_FROM_LABEL":"DELIVERY_GRANTED_FREE_FROM");return y(it||(it=nt`<div class="${0}"><span class="${0}">${0}</span>${0}</div>`),"mpof_ki mp4t_16 m389_6m","mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16 _5537a_8c-wW",e,t?A(t,"free-delivery"):"")}const mt=["TOO_LOW_OFFERS_PRICE_FOR_FREEBOX","TOO_LOW_OFFERS_PRICE_FOR_FREE_DELIVERY_FROM_SELLER","FREEBOX_GRANTED","FREE_DELIVERY_FROM_SELLER_GRANTED","TOO_LOW_BASKET_VALUE_FOR_FREEBOX"];function _t({hints:t=[]},e){var a,r,s,i,n,o,m,_;const l=t.find(({code:t})=>mt.includes(t));if(!l)return"";const c=`${D(null===(a=l.attrs)||void 0===a||null===(r=a.lackingOffersPrice)||void 0===r?void 0:r.amount)} ${P(null===(s=l.attrs)||void 0===s||null===(i=s.lackingOffersPrice)||void 0===i?void 0:i.currency)}`,u=`${p=null===(n=l.attrs)||void 0===n||null===(o=n.minimumBasketValue)||void 0===o?void 0:o.amount,Number(p).toFixed(2).replace(".00","")} ${P(null===(m=l.attrs)||void 0===m||null===(_=m.minimumBasketValue)||void 0===_?void 0:_.currency)}`;var p;if("FREEBOX_GRANTED"===l.code)return st(d("DELIVERY_GRANTED_SMART"),null,e);if("FREE_DELIVERY_FROM_SELLER_GRANTED"===l.code)return ot();if("TOO_LOW_OFFERS_PRICE_FOR_FREEBOX"===l.code){const t=d("DELIVERY_MISSING_AMOUNT",{amount:c});return st(d("DELIVERY_HINT_SMART_LABEL"),t,e)}return"TOO_LOW_BASKET_VALUE_FOR_FREEBOX"===l.code?st(d("DELIVERY_FREE_FROM_BASKET_VALUE",{amount:u}),d("DELIVERY_FREE_FROM_BASKET_VALUE_BADGE"),e):"TOO_LOW_OFFERS_PRICE_FOR_FREE_DELIVERY_FROM_SELLER"===l.code?ot(d("DELIVERY_MISSING_AMOUNT",{amount:c})):""}let lt,ct,dt=t=>t,ut=t=>t;function pt(t){if(t.length<=1)return"";const e={amount:D(t.reduce((t,e)=>t+(e.selected&&e.available.status?Number(e.price.amount):0),0)),currency:t[0].price.currency};return y(ct||(ct=ut`<div class="${0}">${0}</div>`),"mp4t_16 mpof_ki",Z(d("TOTAL_VALUE"),e))}let ht,Et=t=>t;function vt({items:t,seller:{login:e}},a={},r){return y(ht||(ht=Et`<div class="${0}">${0} ${0} ${0} ${0}<a href="/uzytkownik/${0}" class="${0}" data-analytics-clickable data-analytics-click-label="more" data-analytics-click-value="${0}">${0}</a></div>`),"msts_pt a883q mg9e_16 mvrt_16 mh36_16 mj7a_8",((t,e)=>y(lt||(lt=dt`<p class="${0}">${0}<a href="/uzytkownik/${0}" class="${0}" data-analytics-clickable data-analytics-click-label="meta">${0}</a></p>`),"mp4t_0 m3h2_0 mryx_0 munh_0 mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16",d("SELLER_TOTAL_ITEMS",{count:e}),t,"mgn2_14 mp0t_0a mgmw_wo mqu1_21 mj9z_5r mli8_k4 mqen_m6 l16fh lzlpp _5537a_aMrJh",t))(e,t.length),t.map(t=>C(t)),pt(t),_t(a,r),e,"mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 blgl9 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp bup85 mpof_z0 m7er_k4 mp4t_16 mjyo_6x",e,d("MORE_FROM_SELLER"))}let gt,yt,ft,Rt,wt=t=>t,Tt=t=>t,Lt=t=>t;var $t="msub_k4 mdwt_56 mg9e_16 mj7a_16 _5537a_B6kDl",At="mgn2_14 mp0t_0a mqu1_21 mli8_k4 mgmw_rd mp4t_16 mryx_0";let bt,Ot,St,kt=t=>t;var qt="mx7m_1 m911_co mlkp_ag msts_pt mpof_ki m389_6m m7f5_sf mh36_16 mvrt_16 mj7a_8 mg9e_8 mjyo_lo _5537a_vUith",Ct="mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 blgl9 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1jc1 _5537a_qx-4y";let Mt,zt,It=t=>t;var jt="msts_pt mx7m_1 mnyp_co mlkp_ag mg9e_8 mj7a_8 mh36_16 mvrt_16",xt="mpof_ki m389_6m",Nt="mp0t_ji munh_0 m3h2_0 mp4t_0 mqu1_1j mgmw_wo m9qz_yq mgn2_16 mgn2_17_s mryx_0";let Ft,Dt,Pt,Ht=t=>t,Ut=t=>t;function Vt(t){return null==t?void 0:t.flatMap(t=>t.items).flatMap(t=>t.offers).map(t=>({id:t.id,quantity:t.quantity,selected:!0}))}class Bt{constructor(t,e,a){var s,i,n;r(this,"RESIZE_DEBOUNCE_TIME",20),r(this,"MOUSE_ENTER_THROTTLE_TIME",1e3),r(this,"WINDOW_MIN_WIDTH",768),r(this,"PREVIEW_CONTENT_MAX_HEIGHT",530),r(this,"MOUSE_LEAVE_TIMEOUT",300),r(this,"ANALYTICS_EVENT_TIMEOUT",1e3),r(this,"handleResize",((t,e,a)=>{a=a||{};var r=null,s=a=>{r=setTimeout(()=>{e.apply(e,a),r=null},t)},i=()=>{r=setTimeout(n.cancel,t)},n=function(){r?(clearTimeout(r),s(arguments)):a.leading?(e.apply(e,arguments),i()):s(arguments)};return n.cancel=()=>{clearTimeout(r),r=null},n})(this.RESIZE_DEBOUNCE_TIME,()=>{window.innerWidth>=this.WINDOW_MIN_WIDTH?this.addEventListeners():this.removeEventListeners()})),r(this,"handleMouseEnter",()=>{this.timeout?(clearTimeout(this.timeout),this.timeout=null):this.onMouseEnter()}),r(this,"handleMouseLeave",()=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.onMouseLeave(),this.MOUSE_LEAVE_TIMEOUT)}),r(this,"onMouseEnter",(s=this.MOUSE_ENTER_THROTTLE_TIME,i=()=>{this.shouldRenderPreview=!0,p.getPreview().then(({data:t})=>{this.cartStatus.querySelector('[data-role="cart-preview"]')||this.shouldRenderPreview&&(this.shouldRenderPreview=!1,this.cartStatus.insertAdjacentHTML("beforeend",Bt.render(t,this.props)),this.addPrimaryButtonListener(t),setTimeout(()=>{var e,a,r,s,i;r=this.cartStatus.querySelector('[data-role="cart-preview"]'),s=(null===(e=t.cart)||void 0===e||null===(a=e.groups)||void 0===a?void 0:a.length)||0,i={offers:Vt(t.cart.groups)},r&&window.opbox.analytics.sendEvent(r,"boxView",s,i,void 0)},this.ANALYTICS_EVENT_TIMEOUT),this.updateCartHeader(t),this.setElementHeight())})},n=!1,(...t)=>{n||(i(...t),n=!0,setTimeout(()=>{n=!1},s))})),r(this,"onMouseLeave",()=>{this.timeout=null,this.shouldRenderPreview=!1;const t=this.cartStatus.querySelector('[data-role="cart-preview"]');t&&(t.classList.add(..."mj6k_n7 _5537a_3P7jb".split(" ")),t.addEventListener("animationend",this.onAnimationEnd))}),r(this,"onAnimationEnd",()=>{const t=this.cartStatus.querySelector('[data-role="cart-preview"]');t.removeEventListener("animationend",this.onAnimationEnd),this.cartStatus.removeChild(t)}),r(this,"addPrimaryButtonListener",({cart:{groups:t,id:e}})=>{const{isEnterprise:a,cartUrl:r}=this.props,s=a?"goToCart":"checkout",i=this.cartStatus.querySelector(`[data-role=${s}]`);i&&(a?i.addEventListener("click",()=>{window.location.assign(r)}):i.addEventListener("click",()=>{window.opbox.analytics.sendBoxInteractionEvent({contextNode:i,label:"proceedToCheckout",value:i.textContent,customParams:{offers:Vt(t)}}),i.setAttribute("disabled","");const a=(t=>{const e=[];return t.forEach(t=>{const a=t.items.filter(t=>t.selected&&t.available.status);a.length&&e.push(Object.assign({},t,{items:a}))}),e})(t);(t=>window.opbox.edge.post("/temp/carts",{items:R(t)},{headers:{Accept:"application/vnd.allegro.public.v6+json","Content-Type":"application/vnd.allegro.public.v6+json"}}))(a).then(({data:{cart:{id:t}}})=>{window.location.assign(((t,e,a)=>{const r=window.btoa(JSON.stringify({cart:{id:t},purchaseCart:{id:e},metadata:{processEntry:"CART",flags:[]},offers:a}));return`${window.opbox.config.edgeHost}/transaction-entry/process-entry/user?request=${r}`})(e,t,(t=>[...new Set(t.reduce((t,e)=>[...t,...e.items.map(t=>{var e;return(null===(e=t.offers.find(t=>t.primary))||void 0===e?void 0:e.id)||t.offers[0].id})],[]))].map(t=>({id:t})))(a)))})}))}),this.props=a,this.cartStatus=t.querySelector('[data-role="opbox-cart-status"]'),this.cartHeader=e,this.shouldRenderPreview=!1,this.eventListenersAdded=!1,this.timeout=null,window.addEventListener("resize",this.handleResize),window.innerWidth>=this.WINDOW_MIN_WIDTH&&this.addEventListeners()}addEventListeners(){this.eventListenersAdded||(this.eventListenersAdded=!0,this.cartStatus.addEventListener("mouseenter",this.handleMouseEnter),this.cartStatus.addEventListener("mouseleave",this.handleMouseLeave))}removeEventListeners(){this.eventListenersAdded&&(this.eventListenersAdded=!1,this.cartStatus.removeEventListener("mouseenter",this.handleMouseEnter),this.cartStatus.removeEventListener("mouseleave",this.handleMouseLeave))}setElementHeight(){HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];const t=this.cartStatus.querySelector('[data-role="cart-preview"]'),e=this.cartStatus.getBoundingClientRect().bottom+24;t.style.maxHeight=`calc(100vh - ${e}px)`;const a=this.cartStatus.querySelector('[data-role="preview-content"]');[...a.children].reduce((t,e)=>t+e.clientHeight,0)<this.PREVIEW_CONTENT_MAX_HEIGHT&&(a.style.height="auto")}updateCartHeader(t){let e=0;t.cart.groups&&t.cart.groups.forEach(t=>{t.items.forEach(t=>{t.offers.forEach(a=>{a.quantity?e+=a.quantity:e+=t.quantity.selected})})}),this.cartHeader.resetCache(),this.cartHeader.updateCartInfo({quantity:e}),this.cartHeader.putToCache({quantity:e})}static render({cart:{groups:t},delivery:e,shipments:a},{isEnterprise:r,isDarkModeSupported:s,cartUrl:i}){return y(Pt||(Pt=Ut`<section class="${0}" data-role="cart-preview" data-box-name="cart-preview" data-analytics-category="allegro.metrumHeader.cartPreview">${0} ${0} ${0}</section>`),"msts_r0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 mjb5_zr mp7g_f6 mnjl_0 mp4t_8 mpof_ki myre_zn _5537a_Ixmyi",(t=>{if(null==t?void 0:t.length){const e={amount:D(t.reduce((t,e)=>t+e.items.reduce((t,e)=>t+(e.selected&&e.available.status?Number(e.price.amount):0),0),0)),currency:t[0].items[0].price.currency};return y(Ft||(Ft=Ht`<header class="${0}"><div class="${0}"><h4 class="${0}">${0}</h4>${0}</div></header>`),jt,xt,Nt,d("YOUR_CART"),Z(d("CART_TOTAL_VALUE"),e))}return y(Dt||(Dt=Ht`<header class="${0}"><div class="${0}"><h4 class="${0}">${0}</h4></div></header>`),jt,xt,Nt,d("YOUR_CART"))})(t),((t,e,a,r)=>{const s=null==t?void 0:t.filter(t=>t.seller.fulfilment.active);if(null==s?void 0:s.length){const e=new Map;t.forEach(t=>{!e.has("fulfilment")&&t.seller.fulfilment.active?e.set("fulfilment",s):t.seller.fulfilment.active||e.set(t.seller.id,t)});const i=Array.from(e.values());return y(bt||(bt=kt`<div class="${0}" data-role="preview-content">${0}</div>`),$t,i.map(t=>((t,e,a)=>t.length&&t[0].seller.fulfilment.active?y(ft||(ft=Lt` ${0} `),((t,e={},a)=>{const r=t.flatMap(t=>t.items);return y(yt||(yt=Tt`<div class="${0}">${0} ${0} ${0} ${0}<a href="/magazyn-allegro" class="${0}" data-analytics-clickable data-analytics-click-label="more" data-analytics-click-value="allegroWarehouse">${0}</a></div>`),"msts_pt a883q mg9e_16 mvrt_16 mh36_16 mj7a_8",y(gt||(gt=wt`<p class="${0}">${0}&nbsp;<a href="/magazyn-allegro" class="${0}" data-analytics-clickable data-analytics-click-label="meta">${0}</a></p>`),"mp4t_0 m3h2_0 mryx_0 munh_0 mp0t_0a mgmw_wo mli8_k4 mgn2_12 mqu1_16",d("FROM"),"mgn2_14 mp0t_0a mgmw_wo mqu1_21 mj9z_5r mli8_k4 mqen_m6 l16fh lzlpp _5537a_noXA2",d("ALLEGRO_WAREHOUSE")),r.map(t=>C(t)),pt(r),_t(e,a),"mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 blgl9 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp bup85 mpof_z0 m7er_k4 mp4t_16 mjyo_6x mvrt_8 mh36_8 mzmg_6m",d("MORE_FROM_ALLEGRO_WAREHOUSE"))})(t,Object.values(e.fulfilment)[0],a)):y(Rt||(Rt=Lt` ${0} `),vt(t,e.individual[t.id],a)))(t,a,r)))}return(null==t?void 0:t.length)?y(Ot||(Ot=kt`<div class="${0}" data-role="preview-content">${0}</div>`),$t,t.map(t=>vt(t,a.individual[t.id],r))):y(St||(St=kt`<div class="${0}" data-role="preview-content"><div class="${0}"><h4 class="${0}">${0}</h4><p class="${0}">${0}</p><p class="${0}">${0}</p></div></div>`),$t,"msts_pt a883q mg9e_16 mvrt_16 mj7a_16 mh36_16 mzmg_6m","mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_21 mgn2_25_s mgmw_rd mryx_0 mryx_16_s",d("EMPTY_CART_HEADER"),At,d("EMPTY_CART_PARA_1"),At,d("EMPTY_CART_PARA_2"))})(t,0,a,s),(null==t?void 0:t.length)?((t,e,a)=>{const r=null==t?void 0:t.every(t=>t.items.every(t=>!t.available.status||!t.selected));return e?y(Mt||(Mt=It`<footer class="${0}"><button type="button" class="${0}" data-role="goToCart">${0}</button></footer>`),qt,Ct,d("GO_TO_CART")):y(zt||(zt=It`<footer class="${0}"><a href="${0}" class="${0}" data-analytics-clickable>${0}</a><button type="button" class="${0}" data-role="checkout" ${0}>${0}</button></footer>`),qt,a,"mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 blgl9 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp bup85",d("GO_TO_CART"),Ct,r?"disabled":"",d("GO_TO_CHECKOUT"))})(t,r,i):"")}}class Yt{constructor({baseNode:t,props:e}){r(this,"quantityChangeListener",t=>{const e=JSON.parse(this.cartHeader.getFromCache()).totalQuantity+t;this.cartHeader.resetCache(),this.cartHeader.updateCartInfo({quantity:e}),this.cartHeader.putToCache({quantity:e})}),this.baseNode=t,this.previewComponent=null,this.cartHeader=null,this.props={},e&&(this.props=e),this.props.cartUrl||(this.props.cartUrl="/koszyk")}onMount(){const t=this.baseNode.querySelector('[data-role="opbox-cart-status"]'),e=this.baseNode.querySelector('[data-role="cart-quantity"]'),a=this.baseNode.querySelector('[data-role="toggle"]'),r=JSON.parse(t.getAttribute("data-cart-configuration")),s=JSON.parse(t.getAttribute("data-selectors")),i=(n=window,{remove(t){n.localStorage.removeItem(t)},set(t,e){n.localStorage.setItem(t,e)},get(t){return n.localStorage.getItem(t)},has(t){return null!==n.localStorage.getItem(t)},isAvailable(){const t="__localStorageTest__";try{return n.localStorage.setItem(t,t),n.localStorage.getItem(t),n.localStorage.removeItem(t),!0}catch(e){return!1}}});var n;this.cartHeader=function({window:t,cartService:e,cache:a,cartQuantityElement:r,cartStatusElement:s,cartLinkElement:i}){return{init(t,e,a=(()=>{})){return this.options=t,this.initTextCatalog(t.translations),this.loadCartHeaderData(t.cacheTtl,a),!0},initTextCatalog(t){this.textCatalog={getString:e=>t[e]}},cartUpdateEventListener(){const e=({detail:t})=>{this.resetCache(),this.putToCache(t),this.updateCartInfo(t)};return t.addEventListener("cart-update",e),e},addEmptyClass(){r.classList.add("mpof_5r")},removeEmptyClass(){r.classList.remove("mpof_5r")},updateCartInfo({quantity:t}={}){let e="",a=d("EMPTY_CART_LABEL");t>0?(e=t,a=d("CART_ITEMS_LABEL",{count:e}),this.removeEmptyClass()):this.addEmptyClass(),r.innerHTML=e.toString(),i.setAttribute("aria-label",a)},showCart(t){s.classList.add("mpof_z0"),t()},getFromCache(){return a.get("cart")},shouldLoadFromApi(t){return null==t},shouldResetCache(t,e){const{isAuthenticated:a=!1,timestamp:r}=JSON.parse(t);return this.options.isAuthenticated!==a||this.isTtlExpired(r,e)},isTtlExpired(t,e){return t+e<(new Date).getTime()},resetCache(){a.remove("cart")},putToCache({quantity:t}={}){if(a.isAvailable()){const e=(new Date).getTime(),r=JSON.stringify({isAuthenticated:this.options.isAuthenticated,timestamp:e,totalQuantity:t});a.set("cart",r)}},isCartCached(){return a.has("cart")},loadFromCache(t){let e=null;return a.isAvailable()&&this.isCartCached()&&(e=this.getFromCache(),this.shouldResetCache(e,t)&&(this.resetCache(),e=null)),e},loadCartHeaderData(t,a){let r=this.loadFromCache(t);this.shouldLoadFromApi(r)?e.get().then(({data:t})=>{this.updateCartInfo(t),this.putToCache(t),this.showCart(a)}).catch(()=>{this.addEmptyClass(),this.putToCache({quantity:0}),this.showCart(a)}):(r=JSON.parse(r),this.updateCartInfo({quantity:r.totalQuantity}),this.showCart(a))}}}({window,cartService:p,selectors:s,cache:i,cartStatusElement:t,cartQuantityElement:e,cartLinkElement:a}),this.cartHeader.init(r),window.cartHeader=this.cartHeader,window.opbox.plugin.get("cart").then(t=>t.registerQuantityChangeListener(this.quantityChangeListener)).catch(window.opbox.reportError),this.baseNode.querySelector("[data-preview-enabled]")&&(this.previewComponent=new Bt(this.baseNode,this.cartHeader,this.props),window.opbox.performance.markTimeToInteractive())}onUnmount(){this.previewComponent&&this.previewComponent.removeEventListeners(),window.opbox.plugin.get("cart").then(t=>t.unregisterQuantityChangeListener(this.quantityChangeListener)).catch(window.opbox.reportError)}}window.opbox.component.register({prototypeName:"allegro.metrumHeader.cart",clientImplementationVersion:i.a},Yt)},QydH(t){t.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/metrum-placeholder/placeholder-405f0677c6.svg"}')},rRL6(t,e){t.exports="2d5"}}));
//# sourceMappingURL=index.es6-pl-PL_70ecfe71.js.map