((e,t)=>{for(var r in t)e[r]=t[r]})(window,(e=>{var t={};function r(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=(e,t,s)=>{r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=(e,t)=>{if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,(t=>e[t]).bind(null,a));return s},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,"a",t),t},r.o=(e,t)=>({}.hasOwnProperty.call(e,t)),r.p="https://assets.allegrostatic.com/sc-14307/",r(r.s=0)})({"/wBL"(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/x-1a6f095eb2.svg"}')},0(e,t,r){e.exports=r("WdQY")},WdQY(e,t,r){r.r(t);var s=r("rRL6"),a=r.n(s);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const n={"pl-PL":{"Item added to cart.":[["",["Przedmiot trafił do koszyka."]]],"Failed to add the item to your cart. Please try again.":[["",["Nie udało się dodać przedmiotu do koszyka. Spróbuj jeszcze raz."]]],close:[["",["zamknij"]]]}},o=/({{[^}]+}}|{%[^%}]+%})/g,m=/({{[^}]+}})/g,d=/({%[^%}]+%})/g,l=/({{\s*|\s*}}|{%\s*|\s*%})/g;function c(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find(e=>e[0]===t)[1]}const h=(e,t,r)=>{const s=n["pl-PL"][e];if(!s)throw Error(`Missing translation for lang "pl-PL" and key "${e}"`);return t?((e,t,r)=>{let s=c(e,t.context);return parseInt(t.count,10)>=0?s=((e,t)=>{const r=1==(s=t)?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2;var s;return"boolean"!=typeof r?e[r]:e[r?1:0]})(s,t.count):[s]=s,((e,t,r)=>{if(r){let r=0;return e.split(o).map(s=>{if(s.match(d)){const a=t.formatters[r];if(a)return r+=1,a(s.replace(l,""));throw Error(`Missing translation formatter for "${e}"`)}return s.match(m)?t[s.replace(l,"")]:s})}const s=e.match(o);let a=0;return s?s.reduce((r,s)=>{const i=s.replace(l,"");if(s.match(d)){const n=t.formatters[a];if(n)return a+=1,r.replace(s,n(i));throw Error(`Missing translation formatter for "${e}"`)}return s.match(m)?r.replace(s,t[i]):r},e):e})(s,t,r)})(s,t,r):c(s)[0]},g={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},u=/<|>|&|"|'/g,_=(RegExp(Array.from("javascript:",e=>e+"[\\n\\r\\t]*").join(""),"ig"),e=>g[e]);class p{constructor(e,t){this.$=e[0];for(let r=0;r<t.length;r++){const s=t[r];if(Array.isArray(s))for(let e=0;e<s.length;e++)this.$esc(s[e]);else this.$esc(s);this.$+=e[r+1]}}$esc(e){this.$+=e instanceof p?e.$:(e+"").replace(u,_)}toString(){return this.$}}var f=r("/wBL"),y=r("ZKQE");let b,v=e=>e;class w{constructor(e){i(this,"messageNode",null),i(this,"closeButtonNode",null),i(this,"isCurrentMessageOfTypeDanger",!1),i(this,"messageVisibilityTimeout",0),i(this,"render",(e,t)=>{const{document:r}=this.targetWindow;if(r.body.querySelector('[data-role="message"]')){if(this.isCurrentMessageOfTypeDanger===t)return;this.removeMessage()}const s=r.createElement("div");s.innerHTML=((e,t=!1)=>{const r=t?"mjyo_6x msbw_2 mldj_2 mtag_2 mm2b_2 mx7m_1 mlkp_n6 mp7g_oh mjb5_zk mg1a91 _d9395_5vVUj mh36_4 mdwl_5r msts_1p":"mjyo_6x msbw_2 mldj_2 mtag_2 mm2b_2 mx7m_1 mlkp_n6 mp7g_oh mjb5_zk mg1a91 _d9395_5vVUj mh36_4 mdwl_5r msts_t2",s=t?y.b:y.a;return((e,...t)=>new p(e,t))(b||(b=v`<div class="${0}"><div class="${0}" data-role="${0}" data-analytics-enabled data-item data-analytics-category="allegro.plugin.${0}" data-analytics-view-label="message" data-analytics-view-value="${0}"><button type="button" class="${0}" data-role="${0}" aria-label="${0}" data-analytics-interaction data-analytics-interaction-label="messageCloseButton"><img class="${0}" src="${0}" alt="" width="40" height="40"></button><div class="${0}"><div class="${0}"><img class="${0}" data-role="${0}" src="${0}" width="32" height="32" aria-hidden="true" alt=""></div><div class="${0}"><p class="${0}" data-role="${0}">${0}</p></div></div></div></div>`),"mp7g_ca mqm6_0 mpof_ki myre_6m m389_6m mz3i_8 mjb5_zk mse2_0 m7f5_0a_s mg19xc mgr08k",r,"message","cart",t?"danger":"success","mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 b1xj6 mgmw_u5g mrmn_qo mrhf_u8 m31c_kb m0ux_fp b10hn m0t1_f9 mvrt_0 mh36_0","message-close-button",h("close"),"mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 mhd5_0m ivrkk",f.a,"mg9e_16 mg9e_24_l mvrt_16 mvrt_24_l mj7a_16 mj7a_24_l msts_n6 mx7m_1 mlkp_n6 m911_co mnyp_co mefy_co mldj_2 mm2b_2 mgxqsx","mjyo_lo mpof_5r mpof_z0_s m0t1_7i mg9e_0 mj7a_0 mh36_0 mvrt_16 mvrt_24_l","mjyo_6x meqh_en msa3_z4 m0s5_e6 mhd5_0m ivrkk mse2_56 mg9e_0 mvrt_0 mj7a_0 mh36_0","message-information-icon",s,"mg1vjt","mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0","message-paragraph",e)})(e,t).toString(),this.messageNode=s.firstElementChild,this.closeButtonNode=this.messageNode.querySelector('button[data-role="message-close-button"]'),this.isCurrentMessageOfTypeDanger=t,this.renderMessageWithTimeout()}),i(this,"onClick",()=>{this.removeMessage()}),this.targetWindow=e}renderSuccess(){this.render(h("Item added to cart."),!1)}renderDanger(){this.render(h("Failed to add the item to your cart. Please try again."),!0)}renderMessage(){if(this.messageNode){this.targetWindow.clearTimeout(this.messageVisibilityTimeout);const{navigator:{userAgent:e},opbox:{boxViewsMarker:{markBoxAsRendered:t}},document:r}=this.targetWindow,s=this.messageNode.querySelector('[data-role="message"]'),a=r.body.querySelector('[data-role="header-wrapper"]'),i=r.querySelector('button[id="one-click-buy-button"]'),n=r.body.querySelector('[data-role="sticky-menu"]'),o=r.URL.includes("/oferta/"),m=e.toLowerCase().includes("mobile"),d=!!n&&1===n.getClientRects().length,l=!i||-1*i.getClientRects()[0].top>=i.getClientRects()[0].height;m&&(s.style.marginBottom=o&&l?"108px":"52px"),o&&d&&!m&&(s.style.marginTop="84px"),a?a.appendChild(this.messageNode):r.body.insertBefore(this.messageNode,r.body.firstChild),t(this.messageNode),this.attachEventListeners()}}removeMessage(){if(this.messageNode){const e=this.messageNode.parentElement;this.detachEventListeners(),this.targetWindow.clearTimeout(this.messageVisibilityTimeout),e.removeChild(this.messageNode)}}renderMessageWithTimeout(){this.renderMessage(),this.messageVisibilityTimeout=this.targetWindow.setTimeout(()=>this.removeMessage(),3e3)}attachEventListeners(){this.closeButtonNode&&this.closeButtonNode.addEventListener("click",this.onClick)}detachEventListeners(){this.closeButtonNode&&this.closeButtonNode.removeEventListener("click",this.onClick)}}const C=Error("Failed to render precart layer"),I={showPrecartLayer:!1};let x;(e=>{e.CART_CAPACITY_EXCEEDED="OFFER_CART_CAPACITY_EXCEEDED"})(x||(x={}));class j extends Error{constructor(e,t){super("Failed to add to cart"),this.response=t,this.status=e}}const E={changeQuantity(e){return window.opbox.edge.post("/carts/changeQuantityCommand",{items:e},{headers:{Accept:"application/vnd.allegro.public.v5+json","Content-Type":"application/vnd.allegro.public.v5+json"},withCredentials:!0}).catch(({status:e,data:t})=>{throw 422===e&&t&&t.errors&&t.errors.find(e=>e.code===x.CART_CAPACITY_EXCEEDED)&&window.location.assign("/koszyk?error=CART_CAPACITY_EXCEEDED"),new j(e,t)})}},{cartConfiguration:$}=(({pluginName:e,clientImplementationVersion:t})=>{try{return JSON.parse(window.document.querySelector(`script[data-serialize-plugin-name="${e}"][data-civ="${t}"]`).textContent)}catch(r){return window.opbox.reportError(Error(`Missing serialized props of plugin "${e}", with civ "${t}"`)),{}}})({pluginName:"cart",clientImplementationVersion:a.a});$&&window.opbox.plugin.register({name:"cart"},new class{constructor({window:e,cartClient:t,props:r}){i(this,"changeItems",(e,t,r)=>this.cartClient.changeQuantity(e).then(()=>{const s=e.reduce((e,{delta:t})=>e+t,0);if(this.triggerQuantityChangeListeners(s),"hidden"===this.props.experimentVariant)this.message.renderSuccess();else if(t.showPrecartLayer)return this.window.opbox.page.render.fragment({pathname:this.props.precartLayerUrl,additionalQueryParameters:r}).catch(()=>{this.window.opbox.reportError(C)});return Promise.resolve()}).catch(e=>{throw"hidden"===this.props.experimentVariant&&this.message.renderDanger(),this.window.opbox.reportError(e),e})),i(this,"add",(e,t=I)=>{const r=e.filter(({delta:e})=>e>0);return this.changeItems(e,t,{precartOfferId:r.map(({itemId:e})=>e),precartSellerId:r[0]&&r[0].sellerId,itemQuantity:r.map(({itemId:e,delta:t})=>`${e}:${t}`)})}),i(this,"addOffer",(e,t=I)=>this.addOffers([e],t)),i(this,"addOffers",(e,t=I)=>this.changeItems(e.map(({itemId:e,quantity:t,sellerId:r,category:s})=>({itemId:e,delta:t,sellerId:r,navCategoryId:s&&s.id,navTree:s&&s.tree})),t,{precartOfferId:e.map(({itemId:e})=>e),precartSellerId:e[0].sellerId,itemQuantity:e.map(({itemId:e,quantity:t})=>`${e}:${t}`)})),i(this,"removeOffer",({itemId:e,quantity:t,sellerId:r,allowDelete:s})=>this.changeItems([Object.assign({itemId:e,delta:-1*t,sellerId:r},!0===s&&{allowDelete:s})],I,void 0)),i(this,"addBundle",(e,t=I)=>this.changeItems([{itemId:e.bundleMainItemId,delta:e.quantity,sellerId:e.sellerId,rebateId:e.rebateId}],t,{precartOfferId:e.itemsIds,precartSellerId:e.sellerId,rebateId:e.rebateId,quantity:e.quantity.toString(10)})),i(this,"triggerQuantityChangeListeners",e=>{this.quantityChangeListeners.forEach(t=>t(e))}),i(this,"registerQuantityChangeListener",e=>{this.quantityChangeListeners.push(e)}),i(this,"unregisterQuantityChangeListener",e=>{this.quantityChangeListeners=this.quantityChangeListeners.filter(t=>t!==e)}),this.window=e,this.cartClient=t,this.quantityChangeListeners=[],this.props=r,this.message=new w(e)}getPublicApi(){return{add:this.add,addBundle:this.addBundle,addOffer:this.addOffer,addOffers:this.addOffers,removeOffer:this.removeOffer,registerQuantityChangeListener:this.registerQuantityChangeListener,unregisterQuantityChangeListener:this.unregisterQuantityChangeListener}}}({window,cartClient:E,props:$}).getPublicApi())},ZKQE(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/round-tick-f943345bd3.svg","b":"https://assets.allegrostatic.com/metrum/icon/stop-sign-92284fffce.svg"}')},rRL6(e,t){e.exports="8f7"}}));
//# sourceMappingURL=index.es6-pl-PL_927c265e.js.map