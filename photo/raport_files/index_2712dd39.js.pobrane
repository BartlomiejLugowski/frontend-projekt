!function(e,n){for(var r in n)e[r]=n[r]}(window,function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="https://assets.allegrostatic.com/sc-17666/",r(r.s=0)}({0:function(e,n,r){e.exports=r("WdQY")},"1OyB":function(e,n,r){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}r.d(n,"a",(function(){return t}))},WdQY:function(e,n,r){"use strict";r.r(n);var t=r("rRL6"),i=r.n(t),o=r("vuIU"),u=r("1OyB");function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(){return"serviceWorker"in window.navigator}function a(){if(!s())return Promise.reject();try{return window.navigator.serviceWorker.register("/service-worker.js").then((function(){return window.navigator.serviceWorker.ready})).catch((function(e){return window.opbox.plugin.get("sentry").then((function(n){return n.captureException(e)})).catch((function(){console.error(e)})),Promise.reject()}))}catch(e){return Promise.reject()}}function f(){if(!s())return Promise.resolve(void 0);try{return window.navigator.serviceWorker.getRegistration()}catch(e){return Promise.resolve(void 0)}}var p={headers:{Accept:"application/vnd.allegro.public.v1+json","Content-Type":"application/json"},withCredentials:!0};function l(){return s()&&"PushManager"in window}function b(e){return null!==e}function d(e){return void 0===e?Promise.resolve(null):e.pushManager.getSubscription()}function h(e){return void 0===e?Promise.reject():d(e).then((function(e){return b(e)?e.unsubscribe().then((function(){return e.endpoint})):Promise.reject()}))}function v(e){var n=e.toJSON(),r=n.endpoint,t=n.keys,i=(t=void 0===t?{}:t).auth,o=t.p256dh;return window.opbox.edge.post("/notifications/subscriptions",{endpoint:r,auth:i,p256dh:o},p)}function w(e){return window.opbox.edge.post("/notifications/subscriptions/remove",{endpoint:e},p)}var g=Object(o.a)((function e(n){var r=this,t=n.applicationServerKey;Object(u.a)(this,e),c(this,"subscribeToWebPush",(function(){return(l()?new Promise((function(e,n){var r=Notification.requestPermission((function(n){e(n)}));r&&r.then(e,n)})).then((function(e){if("granted"!==e)throw Error("Permission not granted.")})):Promise.reject()).then(a).then((function(e){return function(e,n){var r={userVisibleOnly:!0,applicationServerKey:n};return e.pushManager.subscribe(r)}(e,r.applicationServerKey)})).then(v)})),c(this,"isSubscribedToWebPush",(function(){return f().then(d).then(b).catch((function(){return!1}))})),c(this,"unsubscribeFromWebPush",(function(){return f().then(h).then(w)})),c(this,"isWebPushSupported",(function(){return Promise.resolve(l())})),c(this,"getPublicApi",(function(){return{subscribeToWebPush:r.subscribeToWebPush,isSubscribedToWebPush:r.isSubscribedToWebPush,unsubscribeFromWebPush:r.unsubscribeFromWebPush,isWebPushSupported:r.isWebPushSupported}})),this.applicationServerKey=function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),t=new Uint8Array(r.length),i=0;i<r.length;i+=1)t[i]=r.charCodeAt(i);return t}(t)})),m=function(e){var n=e.pluginName,r=e.clientImplementationVersion;try{return JSON.parse(window.document.querySelector('script[data-serialize-plugin-name="'.concat(n,'"][data-civ="').concat(r,'"]')).textContent)}catch(e){return window.opbox.reportError(Error('Missing serialized props of plugin "'.concat(n,'", with civ "').concat(r,'"'))),{}}}({pluginName:"serviceWorker",clientImplementationVersion:i.a}),y=m.serviceWorkerConfiguration,P=m.applicationServerKey;y&&y.enabled&&P&&window.opbox.plugin.register({name:"serviceWorker"},new g({window:window,applicationServerKey:P}).getPublicApi()),f().then((function(e){e&&"function"==typeof window.cm&&window.cm("send","event",{category:"Performance",label:"ServiceWorkerRegistered"})}))},rRL6:function(e,n){e.exports="003"},vuIU:function(e,n,r){"use strict";function t(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function i(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}r.d(n,"a",(function(){return i}))}}));
//# sourceMappingURL=index_2712dd39.js.map