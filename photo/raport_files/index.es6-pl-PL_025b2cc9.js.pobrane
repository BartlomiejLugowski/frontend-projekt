((e,t)=>{for(var r in t)e[r]=t[r]})(window,(e=>{var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=(e,t,a)=>{r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=(e,t)=>{if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,(t=>e[t]).bind(null,s));return a},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,"a",t),t},r.o=(e,t)=>({}.hasOwnProperty.call(e,t)),r.p="https://assets.allegrostatic.com/sc-11656/",r(r.s=0)})({0(e,t,r){e.exports=r("O14P")},"97Ld"(e,t,r){var a;a=()=>(e=>{var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={exports:{},id:a,loaded:!1};return e[a].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=e,r.c=t,r.p="",r(0)})([(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pl";return r=>""+i(Math.floor(((e||new Date)-r)/1e3),t)},Object.freeze({pl:1,en:2,cz:3,sk:4,uk:5});var r=Object.freeze({month(e){return 1===e?"1 miesiąc temu":e>=2&&e<=4?e+" miesiące temu":e>=5&&e<=11?e+" miesięcy temu":12===e?"rok temu":"ponad rok temu"},day(e){return e+" "+(1===e?"dzień":"dni")+" temu"},hour(e){return 1===e?e+" godzinę temu":e>10&&e<22?e+" godzin temu":e%10>1&&e%10<5?e+" godziny temu":e+" godzin temu"},minute(e){return e<=0?"przed chwilą":1===e?e+" minutę temu":e>1&&e<5?e+" minuty temu":e>=10&&e<20?e+" minut temu":e%10>1&&e%10<5?e+" minuty temu":e+" minut temu"}}),a=Object.freeze({month(e){return 1===e?"1 month ago":e<12?e+" months ago":12===e?"1 year ago":"over a year ago"},day(e){return e+" "+(1===e?"day":"days")+" ago"},hour(e){return 1===e?e+" hour ago":e+" hours ago"},minute(e){return e<=0?"a moment ago":1===e?e+" minute ago":e+" minutes ago"}}),s=Object.freeze({month(e){return 1===e?"před 1 měsícem":e>=2&&e<=11?"před "+e+" měsíci":12===e?"před rokem":"více než před rokem"},day(e){return"před "+e+" "+(1===e?"dnem":"dny")},hour(e){return 1===e?"před 1 hodinou":"před "+e+" hodinami"},minute(e){return e<=0?"před chvílí":1===e?"před 1 minutou":"před "+e+" minutami"}}),n=Object.freeze({month(e){return 1===e?"pred 1 mesiacom":e>=2&&e<=11?"pred "+e+" mesiacmi":12===e?"pred rokom":"viac ako pred rokom"},day(e){return"pred "+e+" "+(1===e?"dňom":"dňami")},hour(e){return 1===e?"pred 1 hodinou":"pred "+e+" hodinami"},minute(e){return e<=0?"pred chvíľou":1===e?"pred 1 minútou":"pred "+e+" minútami"}}),m=Object.freeze({month(e){return 1===e?"1 місяць тому":e>=2&&e<=4?e+" місяці тому":e>=5&&e<=11?e+" місяців тому":12===e?"рік назад":"Більше року тому"},day(e){return e+" "+(1===e?"день":"днів")+" тому"},hour(e){return 1===e?"1 годину тому":e>=2&&e<=4||e>=22&&e<=24?e+" години тому":e+" годин тому"},minute(e){return e<=1?"хвилину тому":e>1&&e<5?e+" хвилини тому":e>=10&&e<20?e+" хвилин тому":e%10>1&&e%10<5?e+" хвилини тому":e+" хвилин тому"}}),o=Object.freeze({pl:r,en:a,cs:s,sk:n,uk:m});function i(e,t){var r=o[t]||o.en;if(e>=2592e3){var a=Math.round(e/2592e3);return r.month(a)}if(e>=86400){var s=Math.floor(e/86400);return r.day(s)}if(e>=3600){var n=Math.floor(e/3600);return r.hour(n)}var m=Math.floor(e/60);return r.minute(m)}}]),e.exports=a()},O14P(e,t,r){r.r(t);const a={withCredentials:!0,headers:{Accept:"application/vnd.allegro.internal.v1+json"}};class s{constructor(e){const{opbox:{edge:t}}=e;this.edge=t}getThreads(){return this.edge.get("/message-center/threads?limit=10",a)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},o=/<|>|&|"|'/g,i=(RegExp(Array.from("javascript:",e=>e+"[\\n\\r\\t]*").join(""),"ig"),e=>m[e]);class l{constructor(e,t){this.$=e[0];for(let r=0;r<t.length;r++){const a=t[r];if(Array.isArray(a))for(let e=0;e<a.length;e++)this.$esc(a[e]);else this.$esc(a);this.$+=e[r+1]}}$esc(e){this.$+=e instanceof l?e.$:(e+"").replace(o,i)}toString(){return this.$}}var _=(e,...t)=>new l(e,t),c=r("97Ld"),u=r.n(c);const d={"pl-PL":{"log in to see your messages":[["",["Zaloguj się, aby zobaczyć swoje wiadomości."]]],"log in":[["",["Zaloguj"]]],"show all":[["",["Pokaż wszystkie"]]],"open message center":[["",["Otwórz Centrum Wiadomości"]]],"you have no message":[["",["Nie masz wiadomości"]]],"in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability.":[["",["W Centrum Wiadomości zobaczysz swoje rozmowy ze sprzedawcami na temat ich ofert, czasu dostawy oraz dostępności produktów."]]],"something went wrong...":[["",["Coś poszło nie tak..."]]],"unfortunately we could not view your messages.":[["",["Niestety nie mogliśmy wyświetlić Twoich wiadomości."]]],from:[["",["od"]]],to:[["",["do"]]],"Do you have a moment?":[["",["Masz chwilę?"]]],"Help us improve the Message Center":[["",["Pomóż ulepszać Centrum Wiadomości"]]]}},h=/({{[^}]+}}|{%[^%}]+%})/g,p=/({{[^}]+}})/g,g=/({%[^%}]+%})/g,f=/({{\s*|\s*}}|{%\s*|\s*%})/g;function y(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find(e=>e[0]===t)[1]}const v=(e,t,r)=>{const a=d["pl-PL"][e];if(!a)throw Error(`Missing translation for lang "pl-PL" and key "${e}"`);return t?((e,t,r)=>{let a=y(e,t.context);return parseInt(t.count,10)>=0?a=((e,t)=>{const r=1==(a=t)?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;var a;return"boolean"!=typeof r?e[r]:e[r?1:0]})(a,t.count):[a]=a,((e,t,r)=>{if(r){let r=0;return e.split(h).map(a=>{if(a.match(g)){const s=t.formatters[r];if(s)return r+=1,s(a.replace(f,""));throw Error(`Missing translation formatter for "${e}"`)}return a.match(p)?t[a.replace(f,"")]:a})}const a=e.match(h);let s=0;return a?a.reduce((r,a)=>{const n=a.replace(f,"");if(a.match(g)){const m=t.formatters[s];if(m)return s+=1,r.replace(a,m(n));throw Error(`Missing translation formatter for "${e}"`)}return a.match(p)?r.replace(a,t[n]):r},e):e})(a,t,r)})(a,t,r):y(a)[0]};var b=r("dP7j"),w="mpof_ki myre_zn m7f5_6m mse2_k4 mp7g_oh mg9e_16 mvrt_16 mj7a_16 mh36_16 mx4z_6m mzmg_6m",$="mgn2_14 mp0t_0a mqu1_21 mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mgmw_3z",k="mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_19 mgn2_21_s mryx_8 mgmw_3z",z="mg9e_16 mvrt_16 mj7a_16 mh36_16 mpof_ki mx7m_1 mnyp_co mlkp_ag _9fb16_gjCmU",j="mpof_92 m7f5_5x m389_5x m7er_k4 mp7g_oh mj9z_5r",x="m7er_k4 mzmg_6m mx7m_1 m911_co mlkp_ag mnyp_5r mdwl_5r mefy_5r",q="mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 b1la9 mjyo_6x mzmg_6m mj9z_5r mpof_vs mupj_5k mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp bgkgt m7er_k4 _9fb16_10TBq";let C,M,O,P,S,L,T,E,W,A,I,N,U=e=>e;const D=u()(null,"pl");function R(e,{loginBaseUrl:t}){const r=((e,...t)=>e.replace(/{(\d+)}/g,(e,r)=>void 0!==t[r]?t[r]:e))(t,encodeURIComponent(e.location));return _(C||(C=U`<div class="${0}"><p class="${0}">${0}</p><a href="${0}" class="${0}" rel="nofollow" data-role="login-button" data-analytics-clickable data-analytics-click-label="loginClick">${0}</a></div>`),"mzmg_6m mg9e_24 mj7a_24 m7er_k4 mx4z_6m",$,v("log in to see your messages"),r,"mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 b1la9 mjyo_6x mzmg_6m mj9z_5r mpof_vs mupj_5k mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1g4y mp4t_16",v("log in"))}class B{constructor(e,t,r,a,s){n(this,"onOpen",()=>{this.root.removeEventListener("inViewport",this.onOpen,!1),this.api.getThreads().then(this.onResponse).catch(this.onError)}),n(this,"onResponse",({data:e})=>{this.services&&this.services.get("opbox-notification-service").then(e=>e.reset("messageCenter"));const{displayMessageCenterSurvey:t}=this.parameters,r=this.filterEmptyThreads(e);0===r.threads.length?this.setContent((({messageCenterBasePath:e})=>_(I||(I=U`<div class="${0}"><div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="no-messages-info">${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4",w,k,v("you have no message"),$,v("in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability."),x,q,e,v("open message center")))(this.parameters)):(this.setContent((({threads:e},{messageCenterBasePath:t,displayMessageCenterSurvey:r,messageCenterSurveyLink:a})=>{const s=((e,t,r,a)=>{const s=r?(e=>_(E||(E=U`<li class="${0} ${0}"><a href="${0}" class="${0}" data-role="survey-link" data-analytics-clickable data-analytics-click-label="surveyClick" data-analytics-click-value="1"><img src="${0}" class="${0}" alt=""/><span class="${0}"><span class="${0}">${0}</span><span class="${0}">${0}</span></span></a></li>`),z,"msts_my mgmw_ye",e,j,b.a,"mjyo_6x mse2_40 meqh_en msa3_z4 mhd5_0m ib0i1 m0s5_9u mg9e_0 mvrt_0 mj7a_0 mh36_0 _9fb16_tTqWd","mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _9fb16_4WWcO","mgn2_14 mp0t_0a mqu1_21 mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mgmw_ye m9qz_yq _9fb16_yAxix",v("Do you have a moment?"),"m6ax_n4 _9fb16_L7lrC mpof_z0 mp4t_0 m3h2_0 mryx_0 munh_0 meqh_en mp0t_0a mli8_k4 mgn2_12 mqu1_16 msa3_z4 mgmw_ye",v("Help us improve the Message Center")))(a):"",n=e.filter(e=>null!==e.interlocutor).map((e,r)=>((e,t,r)=>{const{lastMessage:a}=e,s=a&&!a.author.isInterlocutor,n=e.lastMessage?e.lastMessage.text:_(L||(L=U`&nbsp;`));return _(T||(T=U`<li class="${0}"><a href="${0}/thread/${0}" class="${0}" data-role="show-single-button" data-analytics-clickable data-analytics-click-label="threadClick" data-analytics-click-value="click-thread-${0}">${0}<span class="${0}"><span class="${0} ${0}">${0}${0}</span><span class="${0}">${0}<span class="${0}">${0}</span></span></span></a></li>`),z,t,e.id,j,r,(e=>"!allegro:warehouse"===e.interlocutor.id?_(M||(M=U`<svg class="${0}" data-role="allegro-warehouse-avatar"><image xlink:href="https://assets.allegrostatic.com/metrum/icon/parcel-with-pin-f80869904e.svg" width="100%" height="100%"/></svg>`),"_9fb16_tTqWd _9fb16_9piKo m0s5_np"):_(O||(O=U`<img class="${0}" data-role="avatar" src="${0}" alt=""/>`),"_9fb16_tTqWd _9fb16_9piKo",e.interlocutor.avatarUrl.replace("original","s128b")))(e),"mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _9fb16_4WWcO","mpof_z0 mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4 meqh_en m6ax_n4 _9fb16_yAxix",!1===e.read?"m9qz_yq":"",s?_(S||(S=U`<svg class="${0}" data-role="arrow-icon"><image xlink:href="https://assets.allegrostatic.com/metrum/icon/arrow-u-turn-b66cf828ae.svg" width="100%" height="100%"/></svg>`),"mupj_mm mse2_24 mjyo_6x _9fb16_G1PUO"):"",n,"m7f5_sf mpof_ki m7er_k4 _9fb16_1vGuv",(e=>{let t="z";const{lastMessage:r}=e;return r&&(t=r.author.isInterlocutor?v("from"):v("to")),_(P||(P=U`<span class="${0}">${0} ${0}</span>`),"m6ax_n4 _9fb16_L7lrC mp0t_0a mli8_k4 mgn2_12 mqu1_16 mgmw_3z mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4 _9fb16_esPTj mpof_z0 meqh_en",t,e.interlocutor.login)})(e),"mp0t_0a mli8_k4 mgn2_12 mqu1_16 mgmw_3z mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4",D(new Date(e.lastMessageDateTime)))})(e,t,r));return _(W||(W=U`<ul class="${0}" data-role="threads-list">${0}${0}</ul>`),"mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0",s,n.map(e=>new l([e+""],[])))})(e,t,r,a);return _(A||(A=U`<div class="${0}"><div class="${0}"><div class="${0}">${0}</div></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4","mse2_k4 mp7g_oh _9fb16_vl55-","mdwt_56 mp7g_f6 mq1m_0 mj7u_0 mnjl_0 mqm6_0 meqh_en",s,x,q,t,v("show all"))})(r,this.parameters)),t&&this.addMessageCenterSurveyClickEventListener())}),n(this,"onError",({status:e})=>{const t=401===e?R(this.window,this.parameters):(({messageCenterBasePath:e})=>_(N||(N=U`<div class="${0}"><div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="error-info" data-analytics-enabled data-item data-analytics-view-label="inboxErrorShow">${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4",w,k,v("something went wrong..."),$,v("unfortunately we could not view your messages."),x,q,e,v("open message center")))(this.parameters);this.setContent(t)}),n(this,"setContent",e=>{this.content.innerHTML=e}),n(this,"addMessageCenterSurveyClickEventListener",()=>{this.content.querySelector('[data-role="survey-link"]').addEventListener("click",this.onMessageCenterSurveyClick,!1)}),n(this,"onMessageCenterSurveyClick",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");this.setMessageCenterSurveyPreferenceAndChangeLocation(t)}),n(this,"setMessageCenterSurveyPreferenceAndChangeLocation",e=>{this.window.opbox.preferences.set("displayMessageCenterSurvey",!1).then(()=>{this.window.location=e}).catch(()=>{this.window.location=e})}),n(this,"filterEmptyThreads",e=>{const t=Object.assign({},e);return t.threads=t.threads.filter(({lastMessage:e})=>!!e),t}),this.window=e,this.services=s,this.api=t,this.root=r,this.content=r.querySelector("#mc-header-component"),this.parameters=a}initialize(){const{isAuthenticated:e,isPageCached:t}=this.parameters,r=void 0!==(e=>{const{cookie:t}=document;if(!t)return;const r=t.split("; ").reduce((e,t)=>{const r=t.split("="),a=decodeURIComponent(r[0]),s=decodeURIComponent(r[1]);return e[a]=s,e},{});return r[e]})("userIdentity");e||t&&r?this.root.addEventListener("inViewport",this.onOpen,!1):this.setContent(R(this.window,this.parameters))}}window.opbox.component.register({prototypeName:"allegro.messageCenter.header"},class{constructor({baseNode:e,props:t,services:r}){this.baseNode=e,this.props=t,this.services=r}onMount(){this.messageCenterInbox=new B(window,new s(window),this.baseNode,this.props.parameters,this.services),this.messageCenterInbox.initialize()}})},dP7j(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/megaphone-a9d4d8d271.svg"}')}}));
//# sourceMappingURL=index.es6-pl-PL_025b2cc9.js.map