((e,t)=>{for(var n in t)e[n]=t[n]})(window,(e=>{var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=(e,t,i)=>{n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=(e,t)=>{if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,(t=>e[t]).bind(null,o));return i},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,"a",t),t},n.o=(e,t)=>({}.hasOwnProperty.call(e,t)),n.p="https://assets.allegrostatic.com/sc-12853/",n(n.s=0)})({0(e,t,n){e.exports=n("ijGc")},ijGc(e,t,n){n.r(t);var i,o,s,r,a,l,_,c={},u=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function m(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n){var o,s,r,a={};for(r in t)"key"==r?o=t[r]:"ref"==r?s=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return f(e,a,o,s,null)}function f(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++s:r};return null!=o.vnode&&o.vnode(a),a}function y(e){return e.children}function g(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function E(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return E(e)}}function A(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!v.__r++||l!==o.debounceRendering)&&((l=o.debounceRendering)||a)(v)}function v(){for(var e;v.__r=r.length;)e=r.sort((e,t)=>e.__v.__b-t.__v.__b),r=[],e.some(e=>{var t,n,i,o,s,r;e.__d&&(s=(o=(t=e).__v).__e,(r=t.__P)&&(n=[],(i=m({},o)).__v=o.__v+1,T(r,o,i,t.__n,void 0!==r.ownerSVGElement,null!=o.__h?[s]:null,n,null==s?C(o):s,o.__h),O(n,o),o.__e!=s&&E(o)))})}function b(e,t,n,i,o,s,r,a,l,_){var d,m,h,p,g,E,A,v=i&&i.__k||u,b=v.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(p=n.__k[d]=null==(p=t[d])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?f(null,p,null,null,p):Array.isArray(p)?f(y,{children:p},null,null,null):p.__b>0?f(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(h=v[d])||h&&p.key==h.key&&p.type===h.type)v[d]=void 0;else for(m=0;m<b;m++){if((h=v[m])&&p.key==h.key&&p.type===h.type){v[m]=void 0;break}h=null}T(e,p,h=h||c,o,s,r,a,l,_),g=p.__e,(m=p.ref)&&h.ref!=m&&(A||(A=[]),h.ref&&A.push(h.ref,null,p),A.push(m,p.__c||g,p)),null!=g?(null==E&&(E=g),"function"==typeof p.type&&null!=p.__k&&p.__k===h.__k?p.__d=l=I(p,l,e):l=P(e,p,h,v,g,l),_||"option"!==n.type?"function"==typeof n.type&&(n.__d=l):e.value=""):l&&h.__e==l&&l.parentNode!=e&&(l=C(h))}for(n.__e=E,d=b;d--;)null!=v[d]&&("function"==typeof n.type&&null!=v[d].__e&&v[d].__e==n.__d&&(n.__d=C(i,d+1)),D(v[d],v[d]));if(A)for(d=0;d<A.length;d++)R(A[d],A[++d],A[++d])}function I(e,t,n){var i,o;for(i=0;i<e.__k.length;i++)(o=e.__k[i])&&(o.__=e,t="function"==typeof o.type?I(o,t,n):P(n,o,o,e.__k,o.__e,t));return t}function N(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(e=>{N(e,t)}):t.push(e)),t}function P(e,t,n,i,o,s){var r,a,l;if(void 0!==t.__d)r=t.__d,t.__d=void 0;else if(null==n||o!=s||null==o.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(o),r=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<i.length;l+=2)if(a==o)break e;e.insertBefore(o,s),r=s}return void 0!==r?r:o.nextSibling}function S(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||d.test(t)?n:n+"px"}function w(e,t,n,i,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||S(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||S(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i||e.addEventListener(t,s?L:k,s):e.removeEventListener(t,s?L:k,s);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function k(e){this.l[e.type+!1](o.event?o.event(e):e)}function L(e){this.l[e.type+!0](o.event?o.event(e):e)}function T(e,t,n,i,s,r,a,l,_){var c,u,d,h,p,f,C,E,A,v,I,N=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(_=n.__h,l=t.__e=n.__e,t.__h=null,r=[l]),(c=o.__b)&&c(t);try{e:if("function"==typeof N){if(E=t.props,A=(c=N.contextType)&&i[c.__c],v=c?A?A.props.value:c.__:i,n.__c?C=(u=t.__c=n.__c).__=u.__E:("prototype"in N&&N.prototype.render?t.__c=u=new N(E,v):(t.__c=u=new g(E,v),u.constructor=N,u.render=x),A&&A.sub(u),u.props=E,u.state||(u.state={}),u.context=v,u.__n=i,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=N.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=m({},u.__s)),m(u.__s,N.getDerivedStateFromProps(E,u.__s))),h=u.props,p=u.state,d)null==N.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==N.getDerivedStateFromProps&&E!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(E,v),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(E,u.__s,v)||t.__v===n.__v){u.props=E,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(e=>{e&&(e.__=t)}),u.__h.length&&a.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(E,u.__s,v),null!=u.componentDidUpdate&&u.__h.push(()=>{u.componentDidUpdate(h,p,f)})}u.context=v,u.props=E,u.state=u.__s,(c=o.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(i=m(m({},i),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(h,p)),I=null!=c&&c.type===y&&null==c.key?c.props.children:c,b(e,Array.isArray(I)?I:[I],t,n,i,s,r,a,l,_),u.base=t.__e,t.__h=null,u.__h.length&&a.push(u),C&&(u.__E=u.__=null),u.__e=!1}else null==r&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=B(n.__e,t,n,i,s,r,a,_);(c=o.diffed)&&c(t)}catch(e){t.__v=null,(_||null!=r)&&(t.__e=l,t.__h=!!_,r[r.indexOf(l)]=null),o.__e(e,t,n)}}function O(e,t){o.__c&&o.__c(t,e),e.some(t=>{try{e=t.__h,t.__h=[],e.some(e=>{e.call(t)})}catch(e){o.__e(e,t.__v)}})}function B(e,t,n,o,s,r,a,l){var _,u,d,m=n.props,p=t.props,f=t.type,y=0;if("svg"===f&&(s=!0),null!=r)for(;y<r.length;y++)if((_=r[y])&&(_===e||(f?_.localName==f:3==_.nodeType))){e=_,r[y]=null;break}if(null==e){if(null===f)return document.createTextNode(p);e=s?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),r=null,l=!1}if(null===f)m===p||l&&e.data===p||(e.data=p);else{if(r=r&&i.call(e.childNodes),u=(m=n.props||c).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!l){if(null!=r)for(m={},y=0;y<e.attributes.length;y++)m[e.attributes[y].name]=e.attributes[y].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(((e,t,n,i,o)=>{var s;for(s in n)"children"===s||"key"===s||s in t||w(e,s,null,n[s],i);for(s in t)o&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||w(e,s,t[s],n[s],i)})(e,p,m,s,l),d)t.__k=[];else if(y=t.props.children,b(e,Array.isArray(y)?y:[y],t,n,o,s&&"foreignObject"!==f,r,a,r?r[0]:n.__k&&C(n,0),l),null!=r)for(y=r.length;y--;)null!=r[y]&&h(r[y]);l||("value"in p&&void 0!==(y=p.value)&&(y!==e.value||"progress"===f&&!y)&&w(e,"value",y,m.value,!1),"checked"in p&&void 0!==(y=p.checked)&&y!==e.checked&&w(e,"checked",y,m.checked,!1))}return e}function R(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function D(e,t,n){var i,s;if(o.unmount&&o.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||R(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){o.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&D(i[s],t,"function"!=typeof e.type);n||null==e.__e||h(e.__e),e.__e=e.__d=void 0}function x(e,t,n){return this.constructor(e,n)}function M(e,t,n){var s,r,a;o.__&&o.__(e,t),r=(s="function"==typeof n)?null:n&&n.__k||t.__k,a=[],T(t,e=(!s&&n||t).__k=p(y,null,[e]),r||c,c,void 0!==t.ownerSVGElement,!s&&n?[n]:r?null:t.firstChild?i.call(t.childNodes):null,a,!s&&n?n:r?r.__e:t.firstChild,s),O(a,e)}function U(e,t){M(e,t,U)}function V(e,t,n){var o,s,r,a=m({},e.props);for(r in t)"key"==r?o=t[r]:"ref"==r?s=t[r]:a[r]=t[r];return arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),f(e.type,a,o||e.key,s||e.ref,null)}i=u.slice,o={__e(e,t){for(var n,i,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((i=n.constructor)&&null!=i.getDerivedStateFromError&&(n.setState(i.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},s=0,g.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},n),this.props)),e&&m(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),A(this))},g.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},g.prototype.render=y,r=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,v.__r=0,_=0;var z,j,q,Y=0,H=[],F=o.__b,W=o.__r,G=o.diffed,K=o.__c,$=o.unmount;function Q(e,t){o.__h&&o.__h(j,e,Y||t),Y=0;var n=j.__H||(j.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function X(e,t,n){var i=Q(z++,2);return i.t=e,i.__c||(i.__=[n?n(t):se(void 0,t),e=>{var t=i.t(i.__[0],e);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=j),i.__}function J(e,t){var n=Q(z++,4);!o.__s&&oe(n.__H,t)&&(n.__=e,n.__H=t,j.__h.push(n))}function Z(e,t){var n=Q(z++,7);return oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ee(){H.forEach(e=>{if(e.__P)try{e.__H.__h.forEach(ne),e.__H.__h.forEach(ie),e.__H.__h=[]}catch(t){e.__H.__h=[],o.__e(t,e.__v)}}),H=[]}o.__b=e=>{j=null,F&&F(e)},o.__r=e=>{W&&W(e),z=0;var t=(j=e.__c).__H;t&&(t.__h.forEach(ne),t.__h.forEach(ie),t.__h=[])},o.diffed=e=>{G&&G(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==H.push(t)&&q===o.requestAnimationFrame||((q=o.requestAnimationFrame)||(e=>{var t,n=()=>{clearTimeout(i),te&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);te&&(t=requestAnimationFrame(n))}))(ee)),j=void 0},o.__c=(e,t)=>{t.some(e=>{try{e.__h.forEach(ne),e.__h=e.__h.filter(e=>!e.__||ie(e))}catch(n){t.some(e=>{e.__h&&(e.__h=[])}),t=[],o.__e(n,e.__v)}}),K&&K(e,t)},o.unmount=e=>{$&&$(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(ne)}catch(e){o.__e(e,t.__v)}};var te="function"==typeof requestAnimationFrame;function ne(e){var t=j;"function"==typeof e.__c&&e.__c(),j=t}function ie(e){var t=j;e.__c=e.__(),j=t}function oe(e,t){return!e||e.length!==t.length||t.some((t,n)=>t!==e[n])}function se(e,t){return"function"==typeof t?t(e):t}function re(e,t){for(var n in t)e[n]=t[n];return e}function ae(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var i in t)if("__source"!==i&&e[i]!==t[i])return!0;return!1}function le(e){this.props=e}(le.prototype=new g).isPureReactComponent=!0,le.prototype.shouldComponentUpdate=function(e,t){return ae(this.props,e)||ae(this.state,t)};var _e=o.__b;o.__b=e=>{e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),_e&&_e(e)};var ce="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,ue=(e,t)=>null==e?null:N(N(e).map(t)),de={map:ue,forEach:ue,count:e=>e?N(e).length:0,only(e){var t=N(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:N},me=o.__e;o.__e=(e,t,n)=>{if(e.then)for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);me(e,t,n)};var he=o.unmount;function pe(){this.__u=0,this.t=null,this.__b=null}function fe(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function ye(){this.u=null,this.o=null}o.unmount=e=>{var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),he&&he(e)},(pe.prototype=new g).__c=function(e,t){var n=t.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var o=fe(i.__v),s=!1,r=()=>{s||(s=!0,n.__R=null,o?o(a):a())};n.__R=r;var a=()=>{if(!--i.__u){if(i.state.__e){var e=i.state.__e;i.__v.__k[0]=function e(t,n,i){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(t=>e(t,n,i)),t.__c&&t.__c.__P===n&&(t.__e&&i.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=i)),t}(e,e.__c.__P,e.__c.__O)}var t;for(i.setState({__e:i.__b=null});t=i.t.pop();)t.forceUpdate()}},l=!0===t.__h;i.__u++||l||i.setState({__e:i.__b=i.__v.__k[0]}),e.then(r,r)},pe.prototype.componentWillUnmount=function(){this.t=[]},pe.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,i){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(e=>{"function"==typeof e.__c&&e.__c()}),t.__c.__H=null),null!=(t=re({},t)).__c&&(t.__c.__P===i&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map(t=>e(t,n,i))),t}(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__e&&p(y,null,e.fallback);return o&&(o.__h=null),[p(y,null,t.__e?null:e.children),o]};var ge=(e,t,n)=>{if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ce(e){return this.getChildContext=()=>e.context,e.children}function Ee(e){var t=this,n=e.i;t.componentWillUnmount=()=>{M(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),M(p(Ce,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(ye.prototype=new g).__e=function(e){var t=this,n=fe(t.__v),i=t.o.get(e);return i[0]++,o=>{var s=()=>{t.props.revealOrder?(i.push(o),ge(t,e,i)):o()};n?n(s):s()}},ye.prototype.render=function(e){this.u=null,this.o=new Map;var t=N(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ye.prototype.componentDidUpdate=ye.prototype.componentDidMount=function(){var e=this;this.o.forEach((t,n)=>{ge(e,n,t)})};var Ae="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ve=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,be=e=>("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e);function Ie(e,t,n){return U(e,t),"function"==typeof n&&n(),e?e.__c:null}g.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(g.prototype,e,{configurable:!0,get(){return this["UNSAFE_"+e]},set(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ne=o.event;function Pe(){}function Se(){return this.cancelBubble}function we(){return this.defaultPrevented}o.event=e=>(Ne&&(e=Ne(e)),e.persist=Pe,e.isPropagationStopped=Se,e.isDefaultPrevented=we,e.nativeEvent=e);var ke,Le={configurable:!0,get(){return this.class}},Te=o.vnode;o.vnode=e=>{var t=e.type,n=e.props,i=n;if("string"==typeof t){for(var o in i={},n){var s=n[o];"value"===o&&"defaultValue"in n&&null==s||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===s?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!be(n.type)?o="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():ve.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),i[o]=s)}"select"==t&&i.multiple&&Array.isArray(i.value)&&(i.value=N(n.children).forEach(e=>{e.props.selected=-1!=i.value.indexOf(e.props.value)})),"select"==t&&null!=i.defaultValue&&(i.value=N(n.children).forEach(e=>{e.props.selected=i.multiple?-1!=i.defaultValue.indexOf(e.props.value):i.defaultValue==e.props.value})),e.props=i}t&&n.class!=n.className&&(Le.enumerable="className"in n,null!=n.className&&(i.class=n.className),Object.defineProperty(i,"className",Le)),e.$$typeof=Ae,Te&&Te(e)};var Oe=o.__r;function Be(e){return!!e&&e.$$typeof===Ae}o.__r=e=>{Oe&&Oe(e),ke=e.__c};var Re={useState(e){return Y=1,X(se,e)},useReducer:X,useEffect(e,t){var n=Q(z++,3);!o.__s&&oe(n.__H,t)&&(n.__=e,n.__H=t,j.__H.__h.push(n))},useLayoutEffect:J,useRef:e=>(Y=5,Z(()=>({current:e}),[])),useImperativeHandle(e,t,n){Y=6,J(()=>{"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))},useMemo:Z,useCallback:(e,t)=>(Y=8,Z(()=>e,t)),useContext(e){var t=j.context[e.__c],n=Q(z++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(j)),t.props.value):e.__},useDebugValue(e,t){o.useDebugValue&&o.useDebugValue(t?t(e):e)},version:"17.0.2",Children:de,render:(e,t,n)=>(null==t.__k&&(t.textContent=""),M(e,t),"function"==typeof n&&n(),e?e.__c:null),hydrate:Ie,unmountComponentAtNode:e=>!!e.__k&&(M(null,e),!0),createPortal:(e,t)=>p(Ee,{__v:e,i:t}),createElement:p,createContext(e,t){var n={__c:t="__cC"+_++,__:e,Consumer:(e,t)=>e.children(t),Provider(e){var n,i;return this.getChildContext||(n=[],(i={})[t]=this,this.getChildContext=()=>i,this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(A)},this.sub=e=>{n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=()=>{n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n},createFactory:e=>p.bind(null,e),cloneElement(e){return Be(e)?V.apply(null,arguments):e},createRef:()=>({current:null}),Fragment:y,isValidElement:Be,findDOMNode:e=>e&&(e.base||1===e.nodeType&&e)||null,Component:g,PureComponent:le,memo(e,t){function n(e){var n=this.props.ref,i=n==e.ref;return!i&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!i:ae(this.props,e)}function i(t){return this.shouldComponentUpdate=n,p(e,t)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i},forwardRef(e){function t(t,n){var i=re({},t);return delete i.ref,e(i,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=ce,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},flushSync:(e,t)=>e(t),unstable_batchedUpdates:(e,t)=>e(t),StrictMode:y,Suspense:pe,SuspenseList:ye,lazy(e){var t,n,i;function o(o){if(t||(t=e()).then(e=>{n=e.default||e},e=>{i=e}),i)throw i;if(!n)throw t;return p(n,o)}return o.displayName="Lazy",o.__f=!0,o},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:{current:{readContext:e=>ke.__n[e.__c].props.value}}}};function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let xe;(e=>{e.BUY_AND_PAY="buyAndPay",e.SHOW_DETAILS="oneClickBuyDetails",e.CHANGE_DELIVERY="changeDelivery",e.CHANGE_PAYMENT="changePayment",e.ADD_INVOICE="addInvoice",e.CANCEL_BUYING="cancelBuyingInfo",e.BUY_ACTION_ERROR="buyAndPayError",e.CHANGE_PREFERENCES_ERROR="changePreferencesError",e.NOT_LOGGED_ERROR="userNotLoggedError",e.BLIK_WITH_CODE="blikWithCode",e.CHECK_PAYMENT_STATUS="checkPaymentStatus",e.ALLEGRO_PAY="allegroPay",e.ALLEGRO_PAY_IS_VERIFICATION_REQUIRED="allegroPayIsVerificationRequired",e.ALLEGRO_PAY_VERIFICATION="allegroPayVerification",e.SHOW_DESCRIPTION_TEXT="showDescriptionText"})(xe||(xe={}));const Me={"pl-PL":{"Buying in progress":[["",["Trwa kupowanie"]]],"Wait...":[["",["Poczekaj..."]]],"Stop buying":[["",["Przerwij kupowanie"]]],"Unable to buy item":[["",["Nie udało się kupić przedmiotu"]]],"Unexpected error has occurred":[["",["Wystąpił nieoczekiwany błąd"]]],"I understand":[["",["Rozumiem"]]],"Some error has occurred. If problem persists please contact us.":[["",["Coś poszło nie tak. Spróbuj jeszcze raz. Jeśli problem będzie się powtarzał, skontaktuj się z nami."]]],Close:[["",["Zamknij"]]],Summary:[["",["Podsumowanie"]]],"Log in again before purchasing":[["",["Przed zakupem zaloguj się jeszcze raz"]]],"You have been away for a long time, that is why we want to make sure it is you. Please log in to your account.":[["",["Długo Cię nie było, dlatego chcemy się upewnić, że to Ty. Prosimy, zaloguj się na swoje konto."]]],"Log in":[["",["Zaloguj się"]]],"Purchase has been discontinued":[["",["Zakup został przerwany"]]],"You have cancelled the purchase and have not paid for this item.":[["",["Zrezygnowałeś z zakupu i nie zapłaciłeś za ten przedmiot."]]],"Buy now":[["",["Kup teraz"]]],"New purchase process":[["",["Nowy sposób zakupu"]]],"Fast buy with one click":[["",["Szybki zakup jednym kliknięciem"]]],"Above the [Buy and Pay] button you can find your order details":[["",["Nad przyciskiem [KUPUJĘ I PŁACĘ] znajdziesz dane do Twojego zamówienia"]]],"Your favourite payment method,":[["",["Twoją ulubioną metodę płatności,"]]],"Delivery method the best for you.":[["",["Najlepszą dla Ciebie metodę dostawy."]]],"You can change it if you click [Change] button. Check please your all purchase details before buying.":[["",["Możesz je zmienić, klikając w [ZMIEŃ]. Przed zakupem sprawdź, czy wszystko się zgadza."]]],"BLIK code can be found in your mobile bank app.":[["",["Kod BLIK znajdziesz w swojej aplikacji bankowej."]]],"Enter BLIK code":[["",["Wpisz kod BLIK"]]],"BLIK code":[["",["Kod BLIK"]]],Back:[["",["Cofnij"]]],"Confirm payment":[["",["Potwierdź płatność"]]],"One more step":[["",["Jeszcze jeden krok"]]],"Open your bank application and confirm payment":[["",["Otwórz aplikację Twojego banku i potwierdź płatność."]]],"BLIK illustration":[["",["ilustracja BLIK"]]],"Without confirmation payment will not be finalized.":[["",["Bez potwierdzenia płatność nie dojdzie do skutku."]]],"Please don't put your phone down. We will ask you to confirm payment on your mobile phone.":[["",["Nie odkładaj telefonu. Sprawdzamy kod BLIK. Za chwilę poprosimy Cię o potwierdzenie płatności."]]],"Payment verification in progress":[["",["Trwa weryfikacja płatności"]]],"In a moment, the bank may ask you for additional payment confirmation.":[["",["Za chwilę bank może poprosić Cię o dodatkowe potwierdzenie płatności."]]],"BLIK code must be 1 digit long.":[["",["Kod musi mieć 1 cyfrę.","Kod musi mieć {{count}} cyfry.","Kod musi mieć {{count}} cyfr."]]],"SMS code":[["",["Kod SMS"]]],"Confirm its you":[["",["Potwierdź, że to Ty"]]],"We sent SMS verification code on {{phoneNumber}}. Enter it to confirm your identity.":[["",["Na numer {{phoneNumber}} wysłaliśmy SMS z kodem. Wprowadź go, aby potwierdzić swoją tożsamość."]]],"The code must have 6 digits and it is valid for 3 minutes":[["",["Kod musi mieć 6 cyfr i jest ważny przez 3 minuty"]]],"Send new code":[["",["Wyślij nowy kod"]]],Confirm:[["",["Potwierdzam"]]],"The code is invalid. Please try to type it again.":[["",["Kod jest nieprawidłowy. Spróbuj wpisać go ponownie."]]],"There is a problem with sending SMS code.":[["",["Wystąpił problem z wysłaniem kodu SMS."]]],"Skip this step when possible":[["",["Pomijaj ten krok, gdy to możliwe"]]],"We sent a new SMS code. Receive SMS.":[["",["Wysłaliśmy nowy kod. Odbierz SMS."]]],"The SMS code is required":[["",["Kod SMS jest wymagany"]]],"The SMS code is too short":[["",["Kod SMS jest za krótki"]]],"Money has not been withdrawn from your account. Add item to your basket and finish purchase.":[["",["Pieniądze nie zostały pobrane z Twojego konta. Dodaj przedmiot do koszyka i dokończ zakup."]]],'By selecting the button "Buy and pay" you will go to the summary. Your bank account will not be debited yet':[["",['Wybierając przycisk "Kupuję i płacę" przejdziesz do podsumowania. Twoje konto bankowe nie zostanie jeszcze obciążone kwotą']]]}},Ue=/({{[^}]+}}|{%[^%}]+%})/g,Ve=/({{[^}]+}})/g,ze=/({%[^%}]+%})/g,je=/({{\s*|\s*}}|{%\s*|\s*%})/g;function qe(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find(e=>e[0]===t)[1]}const Ye=(e,t,n)=>{const i=Me["pl-PL"][e];if(!i)throw Error(`Missing translation for lang "pl-PL" and key "${e}"`);return t?((e,t,n)=>{let i=qe(e,t.context);return parseInt(t.count,10)>=0?i=((e,t)=>{const n=1==(i=t)?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2;var i;return"boolean"!=typeof n?e[n]:e[n?1:0]})(i,t.count):[i]=i,((e,t,n)=>{if(n){let n=0;return e.split(Ue).map(i=>{if(i.match(ze)){const o=t.formatters[n];if(o)return n+=1,o(i.replace(je,""));throw Error(`Missing translation formatter for "${e}"`)}return i.match(Ve)?t[i.replace(je,"")]:i})}const i=e.match(Ue);let o=0;return i?i.reduce((n,i)=>{const s=i.replace(je,"");if(i.match(ze)){const r=t.formatters[o];if(r)return o+=1,n.replace(i,r(s));throw Error(`Missing translation formatter for "${e}"`)}return i.match(Ve)?n.replace(i,t[s]):n},e):e})(i,t,n)})(i,t,n):qe(i)[0]};var He,Fe,We,Ge,Ke,$e,Qe,Xe,Je,Ze,et,tt,nt;let it,ot,st,rt,at,lt,_t,ct;function ut(e="application/vnd.allegro.public.v1+json"){return{headers:{Accept:e,"Content-Type":e},withCredentials:!0}}function dt(){return window.innerWidth<it.DESKTOP}function mt(e,t){var n,i;t&&422===t.status&&null!==(n=t.data)&&void 0!==n&&null!==(i=n.errors)&&void 0!==i&&i.length&&((e,t)=>{const n=new URLSearchParams;n.set("offerId",e),n.set("flow","one-click-buy"),t.details&&e!==t.details?n.set("validationId",t.details):t.userMessage&&(n.set("errorCode",t.code),n.set("userMessage",t.userMessage)),window.location.assign("/transakcja/blad?"+n.toString())})(e,t.data.errors[0])}(e=>{e.POSTPAID="POSTPAID",e.PREPAID="PREPAID"})(He||(He={})),(e=>{e.AVAILABLE="AVAILABLE",e.UNAVAILABLE="UNAVAILABLE"})(Fe||(Fe={})),(e=>{e.RANGE="RANGE",e.INSTANT="INSTANT"})(We||(We={})),(e=>{e.Fixed="FIXED",e.Custom="CUSTOM"})(Ge||(Ge={})),(e=>{e.AllegroCare="ALLEGRO_CARE",e.Insurance="INSURANCE",e.Donation="DONATION"})(Ke||(Ke={})),(e=>{e.HIDDEN="HIDDEN",e.OPTIONAL="OPTIONAL",e.REQUIRED="REQUIRED"})($e||($e={})),(e=>{e.PAYU="PAYU",e.REBATED="REBATED",e.GLOBAL_SERVICES="GLOBAL_SERVICES",e.ADDITIONAL_SERVICES="ADDITIONAL_SERVICES"})(Qe||(Qe={})),(e=>{e.DRAFT="DRAFT",e.BUYING="BUYING",e.BOUGHT="BOUGHT",e.PARTIALLY_BOUGHT="PARTIALLY_BOUGHT",e.BUY_FAILED="BUY_FAILED",e.CANCELLED="CANCELLED"})(Xe||(Xe={})),(e=>{e.SUCCESS="SUCCESS",e.FAILED="FAILED",e.PROCESSING="PROCESSING"})(Je||(Je={})),(e=>{e.BUY_NOW="BUY_NOW",e.CART="CART",e.ONE_CLICK_BUY="ONE_CLICK_BUY",e.AUCTION="AUCTION",e.RELATED="RELATED",e.BUY_AGAIN="BUY_AGAIN"})(Ze||(Ze={})),(e=>{e.INSTALLMENTS_ONLY="INSTALLMENTS_ONLY",e.ALLEGRO_PAY="ALLEGRO_PAY",e.ALLEGRO_PAY_ONLY="ALLEGRO_PAY_ONLY",e.INSURANCE="INSURANCE",e.PURCHASE_FILLED_WITH_PREFERENCES="PREFERENCES",e.INVERTED_DAPF="INVERTED_DAPF",e.LIFT="LIFT",e.ONE_CLICK_BUY="ONE_CLICK_BUY",e.ONE_CLICK_CHANGE="ONE_CLICK_CHANGE"})(et||(et={})),(e=>{e.ALLOW_SUBSTITUTES="ALLOW_SUBSTITUTES"})(tt||(tt={})),(e=>{e.SET_DELIVERY_SPOT="setDeliverySpot",e.SHOW_DELIVERY_SPOT="showDeliverySpot",e.CHANGE_DELIVERY_SPOT="changeDeliverySpot"})(nt||(nt={})),(e=>{e[e.DESKTOP=768]="DESKTOP"})(it||(it={})),(e=>{e.DELIVERY="DELIVERY",e.PAYMENT="PAYMENT"})(ot||(ot={})),(e=>{e.CLICK="click",e.BOX_INTERACTION="boxInteraction",e.BOX_VIEW="boxView",e.OTHER="other",e.CLOSE="close"})(st||(st={})),(e=>{e.ONE_CLICK_BUY="OneClickBuy",e.BUY_NOW="BuyNow"})(rt||(rt={})),(e=>{e.VISIBLE="visible",e.HIDDEN="hidden"})(at||(at={})),(e=>{e.CHANGE_PREFERRED_DELIVERY="changeDeliveryMethod",e.CHANGE_PREFERRED_PAYMENT="changePaymentMethod",e.ADD_INVOICE="addInvoice"})(lt||(lt={})),(e=>{e.START="start",e.COMPLETE="complete",e.TIMEOUT="timeout",e.ERROR="error"})(_t||(_t={})),(e=>{e.SHOW_ITEM="showItem",e.OCB_DETAILS="oneClickBuyDetails"})(ct||(ct={}));const ht=new class{setParams(e,t,n){this.paymentMethodId=null==e?void 0:e.paymentMethod.id,this.deliveryMethodId=null==t?void 0:t.delivery.method.id,this.invoiceAddressId=null==e?void 0:e.invoice.invoiceAddressId,this.offerId=n}getParams(){let e={paymentMethodId:this.paymentMethodId,deliveryMethodId:this.deliveryMethodId,invoiceAddressId:this.invoiceAddressId,offerId:this.offerId};const t=Nt.getData();return t&&(e=Object.assign({},e,{purchaseId:t.id,paymentId:t.payment.paymentId})),e}},pt="undefined"!=typeof window&&window.document?window.document.querySelector('[data-prototype-id="allegro.transaction.buyAndPay"]'):null;function ft(e,t,n,i){window&&window.opbox&&window.opbox.analytics&&window.opbox.analytics.sendEvent({contextNode:pt,action:e,value:n,customParams:Object.assign({flow:"PurchasingProcess",flowType:rt.ONE_CLICK_BUY},i),label:t})}function yt(e,t){const n=Object.assign({flowType:void 0},t||{});ft(st.BOX_VIEW,e,"OneClickBuyButton",n)}function gt(e,t,n){ft(st.BOX_VIEW,e,t,n)}function Ct(e,t,n){const i=Object.assign({flowType:t},n||{});ft(st.BOX_INTERACTION,"PreBuyNow",e,i)}function Et(e){ft(st.BOX_INTERACTION,"buyButtonClick",void 0,e)}function At(e){ft(st.BOX_INTERACTION,"checkPaymentStatus",e)}function vt(e,t=!1){ft(st.BOX_INTERACTION,"modalClose",e,Object.assign({},ht.getParams(),{isClosedByClickOutside:t}))}function bt(e,t){ft(st.OTHER,e,t,ht.getParams())}function It(e,t,n){ft(e,"identityVerification",t,Object.assign({},ht.getParams(),{skipFutureSmsVerification:n}))}const Nt=new class{setData(e){this.purchaseCreatedData=e}getData(){return this.purchaseCreatedData}};function Pt(e){const{minimalDelayToResolvePromise:t=0}=e,n=Nt.getData(),i=n?Promise.resolve(n):(e=>{const{offerId:t,hash:n,blikCode:i,actionType:o}=e,s=o===xe.BUY_AND_PAY?"/purchases-with-selections-accept":"/purchases-with-selections-change";return window.opbox.edge.post(s,{value:n,blikCode:i},ut()).then(e=>e.data).catch(e=>(mt(t,e),Promise.reject(e)))})(e);return Promise.all([i,(o=t,new Promise(e=>setTimeout(()=>e(""),o)))]).then(([e])=>(Nt.setData(e),e));var o}function St(e,t){const n=`/transakcja/${e}/zamowienie`;t?window.location.assign(`${n}${t}`):window.location.assign(n)}function wt(e,t){const n=e.selectionsNotApplied;if(t===xe.BUY_AND_PAY)(e=>{const t={purchaseId:e.id,selectionsNotApplied:e.selectionsNotApplied};window.sessionStorage.setItem("transactionOneClickBuySelections",JSON.stringify(t))})(e),St(e.id);else switch(window.sessionStorage.removeItem("transactionOneClickBuySelections"),t){case xe.ADD_INVOICE:St(e.id,"#invoice");break;case xe.CHANGE_DELIVERY:St(e.id,"#delivery");break;case xe.CHANGE_PAYMENT:St(e.id,n.includes(ot.DELIVERY)?"#delivery":"#payment");break;default:St(e.id)}}function kt(e){var t;return Number((null===(t=e.sale)||void 0===t?void 0:t.amount)||e.original.amount)}function Lt(e){const{price:t,delivery:n}=e;return(kt(t)+Number(n.price.amount)).toFixed(2)}const Tt=Re.createElement,Ot=Re.createContext({services:{get(){return Promise.resolve()}}});function Bt(e){return Tt(Ot.Provider,Object.assign({value:{services:e.services}},e))}let Rt;function Dt(e){return Rt.BLIK_WITH_CODE===e}function xt(e){return Rt.ALLEGRO_PAY===e}function Mt(e){return!Dt(e)&&!xt(e)}(e=>{e.BLIK_WITH_CODE="OCP-blik",e.ALLEGRO_PAY="allegro-credit"})(Rt||(Rt={}));const Ut=Re.createElement,{PureComponent:Vt}=Re;class zt extends Vt{render(){return Ut("div",{className:"_9f0v0 mj7a_0"},Ut("h3",{className:"mgmw_wo mli8_k4 mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_21 mgn2_25_s mryx_8 mryx_16_s"},this.props.children||" "))}}const jt=Re.createElement,{PureComponent:qt}=Re;class Yt extends qt{render(){return jt("div",{className:"_9f0v0 mg9e_0 mr3m_1"},this.props.children)}}const Ht=Re.createElement,{PureComponent:Ft}=Re;class Wt extends Ft{render(){const{children:e,divider:t=!0}=this.props;return Ht(Re.Fragment,null,t&&Ht("hr",{className:"_d7szm"}),Ht("div",{className:this.footerClassName},e))}get footerClassName(){return this.props.extraFooterPadding?"_9f0v0 _cef89_QW7vU mj7a_8 mj7a_16_s mg9e_8 mg9e_16_s":"_9f0v0 mj7a_0 mg9e_0"}}const Gt=Re.createElement,{Component:Kt}=Re;class $t extends Kt{render(){const{children:e}=this.props;return Gt("div",{className:this.buttonsWrapperClassName},e)}get buttonsWrapperClassName(){const{justifyContent:e}=this.props;return"space-between"===e?"mpof_ki _cef89_RBkVK m7f5_sf":"flex-end"===e?"mpof_ki _cef89_RBkVK m7f5_0a":"mpof_ki _cef89_RBkVK m7f5_6m"}}const Qt=Re.createElement,{Component:Xt}=Re;class Jt extends Xt{render(){return Qt("div",{className:this.wrapperClassName},this.message)}get message(){return this.shouldShowVerificationProgressMessage?Ye("In a moment, the bank may ask you for additional payment confirmation."):this.isBlikFlow?Ye("Please don't put your phone down. We will ask you to confirm payment on your mobile phone."):Ye("Wait...")}get dataRole(){return this.shouldShowVerificationProgressMessage?"buy-and-pay-credit-card-verification-label":this.isBlikFlow?"buy-and-pay-wait-blik-label":"buy-and-pay-wait-label"}get wrapperClassName(){return this.isBlikFlow?"mryx_8":void 0}get shouldShowVerificationProgressMessage(){const{paymentMethodId:e,finalizePurchaseStarted:t}=this.props;return Mt(e)&&t}get isBlikFlow(){return Dt(this.props.paymentMethodId)}}const Zt=Re.createElement,{Component:en}=Re;class tn extends en{render(){return Zt("div",{className:"mryx_8 mp4t_8 _6gjm5"})}}function nn(e){const{dataLayer:t}=window;t&&t.push(e)}let on,sn;(e=>{e.WARNING_CONTINUE_CHALLENGE="WARNING_CONTINUE_CHALLENGE"})(on||(on={})),(e=>{e.DISPLAY_FRAME="DISPLAY_FRAME",e.AUTHENTICATION_CANCELLED="AUTHENTICATION_CANCELLED",e.AUTHENTICATION_NOT_REQUIRED="AUTHENTICATION_NOT_REQUIRED",e.AUTHENTICATION_SUCCESSFUL="AUTHENTICATION_SUCCESSFUL"})(sn||(sn={}));const rn=Re.createElement,{Component:an}=Re;class ln extends an{constructor(...e){super(...e),De(this,"state",{showIframe:!1}),De(this,"handleMessage",e=>{const{paymentId:t,purchaseId:n,onChallengeComplete:i}=this.props,o=e.data;switch(((e,t)=>{ft(st.BOX_INTERACTION,"PaymentChallengeStatus",e,t)})(o,{paymentId:t,purchaseId:n}),o){case sn.DISPLAY_FRAME:this.handleDisplayFrame();break;case sn.AUTHENTICATION_CANCELLED:case sn.AUTHENTICATION_NOT_REQUIRED:case sn.AUTHENTICATION_SUCCESSFUL:i()}})}componentDidMount(){window.addEventListener("message",this.handleMessage)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage)}render(){const{iframeSrc:e}=this.props;return rn("div",{className:this.wrapperStyles},rn("div",{className:"mp7g_f6 _cef89_HPfJc"},rn("iframe",{src:e,sandbox:"allow-forms allow-scripts allow-same-origin",className:"mp4t_56 m3h2_56 mryx_56 munh_56 mse2_k4 _cef89_FAzmY"})))}handleDisplayFrame(){this.setState({showIframe:!0})}get wrapperStyles(){return this.state.showIframe?"mp7g_oz mq1m_0 mj7u_0 mjb5_1 m7er_k4 mse2_k4 mlmm_56 _cef89_em-oz":"mpof_5r"}}const{Component:_n}=Re;class cn extends _n{render(){return this.header}get header(){return this.shouldShowVerificationInProgress?Ye("Payment verification in progress"):this.isBlikFlow?Ye("One more step"):Ye("Buying in progress")}get isBlikFlow(){return Dt(this.props.paymentMethodId)}get shouldShowVerificationInProgress(){const{finalizePurchaseStarted:e,paymentMethodId:t}=this.props;return Mt(t)&&e}}const un=Re.createElement,{Component:dn}=Re;class mn extends dn{constructor(...e){super(...e),De(this,"state",{shouldDisableCancelButton:!1,challengeRequired:!1,finalizePurchaseStarted:!1}),De(this,"hasUserCancelledBuying",!1),De(this,"cancelBuyingHandler",()=>{this.hasUserCancelledBuying=!0,ft(st.BOX_INTERACTION,"cancel"),this.props.onCancel()})}componentDidMount(){this.buyAndPay(),this.sendInitialEvents(),setTimeout(()=>this.setState({shouldDisableCancelButton:!0}),this.finalizePaymentDelay)}render(){const{oneClickBuyParams:e,shouldShowCancelButton:t=!0}=this.props,{challengeRequired:n}=this.state;return un(Re.Fragment,null,un(zt,null,un(cn,{paymentMethodId:e.paymentMethod.id,finalizePurchaseStarted:this.state.finalizePurchaseStarted})),un(Yt,null,un("div",{className:this.contentWrapperClassName},un(Jt,{paymentMethodId:e.paymentMethod.id,finalizePurchaseStarted:this.state.finalizePurchaseStarted}),n&&un(ln,{iframeSrc:this.challengeIframeSrc,onChallengeComplete:()=>this.redirectToThankYouPage()}),un(tn,null))),t&&un(Wt,null,un($t,null,un("button",{type:"button",className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4",onClick:this.cancelBuyingHandler,disabled:this.state.shouldDisableCancelButton},Ye("Stop buying")))))}buyAndPay(){const{offerId:e,pricing:t,blikCode:n}=this.props;Pt({offerId:e,hash:t.purchase.hash,actionType:xe.BUY_AND_PAY,minimalDelayToResolvePromise:this.finalizePaymentDelay,blikCode:n}).then(e=>{this.hasUserCancelledBuying||this.finalizePurchase(e)}).catch(e=>this.handleError(e))}finalizePurchase(e){var t;mn.areAllSelectionsApplied(e.selectionsNotApplied)?(this.setState({finalizePurchaseStarted:!0}),(t=e.id,window.opbox.edge.post(`/purchases/${t}/finalize`,{},ut()).then(e=>e.data)).then(t=>{(null==t?void 0:t.purchaseStatus)===Xe.BOUGHT?(bt("Bought",void 0),this.setState({purchaseFinalizeStatus:t}),this.handlePostPurchaseAnalytics(e.id),this.handleSurveys(e),this.handleFinalizedPurchaseNavigation(t,e.id,e.payment.paymentId)):this.handleError()}).catch(e=>this.handleError(e))):wt(e,xe.BUY_AND_PAY)}handleFinalizedPurchaseNavigation(e,t,n){mn.isChallengeRequired(e)?this.handleChallengeRequired():this.shouldNavigateToPaymentStatusCheck?this.props.onActionChange(xe.CHECK_PAYMENT_STATUS,t,n):mn.handleFinalizedRedirect(e)}handleSurveys(e){this.saveSurveyMetadata(e),this.updateSurveyTriggers()}handleError(e){switch(null==e?void 0:e.status){case 422:break;case 401:case 403:this.props.onNotLoggedError();break;default:this.props.onError()}}sendInitialEvents(){nn({event:"OneClickBuy"}),gt(xe.BUY_AND_PAY)}updateSurveyTriggers(){document.cookie="oneClickBuyProcessWithDapf=true; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",(e=>{const t=localStorage.getItem("offersFromInternationalSellers");t&&JSON.parse(t).includes(e)&&sessionStorage.setItem("purchaseBoughtFromInternationalSeller","true")})(this.props.offerId),sessionStorage.setItem("purchaseBoughtSuccessfully","ONE_CLICK_BUY")}saveSurveyMetadata({buyer:e,orders:t}){const{pricing:n,offerId:i}=this.props,o={buyerId:e.id,processEntry:Ze.ONE_CLICK_BUY,totalPrice:{amount:Lt(n),currency:n.price.original.currency},offersIds:[i],ordersIds:[t[0].id]};((e,t)=>{e.get("opbox-transaction-survey-service").then(e=>{e.setSurveyMetadata(t)}).catch(()=>{})})(this.context.services,o)}get shouldNavigateToPaymentStatusCheck(){return this.isBlikFlow}get finalizePaymentDelay(){return 1e3*this.props.buyingDelaySeconds}get isBlikFlow(){return Dt(this.props.oneClickBuyParams.paymentMethod.id)}get contentWrapperClassName(){return this.isBlikFlow?"_cef89_Oao59":void 0}handlePostPurchaseAnalytics(e){const{pricing:t,offerId:n,oneClickBuyParams:i}=this.props;((e,t,n,i)=>{const o=kt(e.price);nn({event:"purchase",ecommerce:{currency:e.price.original.currency,coupon:!1,environment:dt()?"mWeb":"desktop",items:[{item_id:n,price:o,quantity:e.quantity}],pay_used:xt(i),shipping:Number(e.delivery.price.amount),transaction_id:t,value:o}})})(t,e,n,i.paymentMethod.id)}static areAllSelectionsApplied(e){return 0===(null==e?void 0:e.length)}static isChallengeRequired({paymentFinalizationStatus:e,redirectUrl:t}){return e===on.WARNING_CONTINUE_CHALLENGE&&!!t}handleChallengeRequired(){this.setState({challengeRequired:!0})}static handleFinalizedRedirect(e){const t=e.redirectUrl||e.thankYouPageUrl;window.location.assign(t)}redirectToThankYouPage(){window.location.assign(this.state.purchaseFinalizeStatus.thankYouPageUrl)}get challengeIframeSrc(){return this.state.purchaseFinalizeStatus.redirectUrl}}function hn(e){let[t,n]=e.toString().split(".");return t&&!Number.isNaN(parseInt(t,10))||(t="0"),t.length>4&&(t=(e=>{const t=e.slice(0,e.length%3);return[...t?[t]:[],...e.slice(e.length%3).match(/.{3}/g)||[]].join(" ")})(t)),n&&!Number.isNaN(parseInt(n,10))||(n="00"),1===n.length&&(n+="0"),`${t},${n.slice(0,2)} zł`}De(mn,"contextType",Ot);const pn=Re.createElement,{PureComponent:fn}=Re;class yn extends fn{render(){return pn("div",{className:"_6gjm5"})}}const gn=Re.createElement,{Component:Cn}=Re;class En extends Cn{componentDidMount(){if(this.props.sendVisibilityEvents){const{pricing:e,oneClickBuyParams:t}=this.props;yt(at.VISIBLE,((e,t)=>({deliveryId:e.delivery.method.id,paymentId:t.paymentMethod.id,invoiceAddressId:t.invoice.invoiceAddressId}))(e,t))}}componentWillUnmount(){this.props.sendVisibilityEvents&&yt(at.HIDDEN)}render(){const{disabled:e,onConfirmOneClickBuyAction:t,type:n,processing:i}=this.props;return gn(Re.Fragment,null,gn("button",{className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7 m7er_k4 _cef89_dR1zw",onClick:t,disabled:e,type:n,id:"one-click-buy-button"},i?gn(yn,null):this.label))}get label(){const{oneClickBuyParams:e,pricing:t,showLabelWithoutPrice:n,showSummaryLabel:i}=this.props;let{label:o}=e;return i&&e.summaryLabel&&(o=e.summaryLabel),n?o:`${o} (${hn(Lt(t))})`}}De(En,"defaultProps",{type:"button"});var An="mpof_ki mryx_16";let vn;(e=>{e.OCB_PAYMENT_METHOD_CREDIT_CARD="OCB_PAYMENT_METHOD_CREDIT_CARD",e.OCB_DELIVERY="OCB_DELIVERY",e.OCB_INVOICE="OCB_INVOICE",e.FREEBOX="FREEBOX",e.OCB_PAYMENT_METHOD_ALLEGRO_PAY="OCB_PAYMENT_METHOD_ALLEGRO_PAY"})(vn||(vn={}));const bn=Re.createElement,{Component:In}=Re;class Nn extends In{render(){return bn("div",{className:"mx4z_5x mzmg_6m mvrt_8"},bn("i",{className:this.iconCSS}))}get iconCSS(){if(!this.props.icon)return"mpof_z0 mse2_24 _cef89_jeW5u";let e="";switch(this.props.icon.id){case vn.OCB_DELIVERY:e="_cef89_voRAv";break;case vn.OCB_PAYMENT_METHOD_CREDIT_CARD:e="_cef89_rTLpR";break;case vn.OCB_INVOICE:e="m0s5_91 _cef89_ne1vA";break;case vn.OCB_PAYMENT_METHOD_ALLEGRO_PAY:e="_cef89_kO0zi"}return"mpof_z0 mse2_24 _cef89_jeW5u "+e}}const Pn=Re.createElement,{Component:Sn}=Re;class wn extends Sn{render(){const{names:e,labels:t,showFreeboxIconInFirstLine:n,showFreeboxIconInLabelsSection:i}=this.props;return Pn("div",{className:"mr3m_1 mx4z_5x"},e.map((e,t)=>Pn("p",{className:"mp4t_0 m3h2_0 mryx_0 munh_0 mpof_ki m389_6m",key:t},Pn("span",null,e.text),n&&0===t&&Pn("i",{className:"mpof_vs munh_8 _cef89_LF0pC"}))),this.shouldShowLabels&&t.map(({text:e,target:t},n)=>Pn("p",{className:"_6x7yn mp4t_0 m3h2_0 mryx_0 munh_0 mpof_ki m389_6m",key:n},this.renderLabelText(e,t),i&&Pn("i",{className:"mpof_vs munh_8 _cef89_LF0pC"}))))}get shouldShowLabels(){const{labels:e}=this.props;return!!(e&&e.length>0)}renderLabelText(e,t){return null!=t&&t.id?this.handleLabelWithTargetId(e,t.id):Pn("span",null,e)}handleLabelWithTargetId(e,t){const{onTileLabelAction:n,descriptions:i}=this.props,o=this.getDescriptionByTargetId(t,i);return o&&n?Pn("button",{type:"button",className:"_6x7yn _w7z6o _ypulx mgmw_qh",onClick:()=>n(o)},e):null}getDescriptionByTargetId(e,t){return null==t?void 0:t.find(t=>t.id===e)}}const kn=Re.createElement,{Component:Ln}=Re;class Tn extends Ln{constructor(...e){super(...e),De(this,"handleClick",()=>{const{handleAction:e}=this.props;e&&e()})}render(){const{action:e}=this.props;return e?kn("button",{type:"button",className:"_w7z6o _ypulx mtsp_ib mg9e_0 mvrt_0 mj7a_0 mh36_0 mx4z_5x _cef89_gkS-U",onClick:this.handleClick},kn("span",{className:"mpof_5r_s"},e.shortLabel),kn("span",{className:"mpof_5r mpof_z0_s"},e.label)):null}}const On=Re.createElement,{Component:Bn}=Re;class Rn extends Bn{render(){const{data:e,onTileAction:t,isAllowedBuyAction:n,shouldHideTileIcon:i,shouldChangeDisplayOrder:o}=this.props,{icon:s,action:r}=e;return On("div",{className:An},!i&&On(Nn,{icon:s}),On(wn,{names:this.tileNames,labels:this.tileLabels,showFreeboxIconInFirstLine:this.shouldShowFreeboxIcon&&!o,showFreeboxIconInLabelsSection:this.shouldShowFreeboxIcon&&o}),n&&On(Tn,{action:r,handleAction:t}))}get tileNames(){const{data:e,shouldChangeDisplayOrder:t}=this.props;return t?e.labels.map(e=>({text:e.text})):[this.deliveryNameWithPrice]}get tileLabels(){const{data:e,shouldChangeDisplayOrder:t}=this.props;return t?[this.deliveryNameWithPrice]:e.labels}get deliveryNameWithPrice(){const{pricing:e,data:t}=this.props,n=hn(e.delivery.price.amount);return{text:`${t.name.text}: ${n}`}}get shouldShowFreeboxIcon(){var e,t;return!(null===(e=this.props.freebox)||void 0===e||null===(t=e.icon)||void 0===t||!t.id)}}const Dn=Re.createElement,{Component:xn}=Re;class Mn extends xn{render(){const{data:e,onTileAction:t,onTileLabelAction:n,isAllowedBuyAction:i,shouldHideTileIcon:o}=this.props,{icon:s,action:r,descriptions:a}=e;return Dn("div",{className:An},!o&&Dn(Nn,{icon:s}),Dn(wn,{names:this.tileNames,labels:this.tileLabels,descriptions:a,onTileLabelAction:n}),i&&Dn(Tn,{action:r,handleAction:t}))}get tileNames(){const{data:{id:e,name:t},payment:{labels:n},shouldChangeDisplayOrder:i}=this.props;return i&&!Dt(e)?[{text:n[0].text}]:[{text:t.text}]}get tileLabels(){const{data:{id:e,name:t},payment:{labels:n},shouldChangeDisplayOrder:i,removeRepresentativeExampleLabel:o}=this.props;return i&&!Dt(e)?[{text:t.text},...n.slice(1)]:o?null==n?void 0:n.filter(e=>{var t;return"representative-example"!==(null===(t=e.target)||void 0===t?void 0:t.id)}):n}}const Un=Re.createElement,{Component:Vn}=Re;class zn extends Vn{render(){const{data:e,onTileAction:t,shouldHideTileIcon:n}=this.props,{name:i,icon:o,action:s,labels:r}=e;return Un("div",{className:An},!n&&Un(Nn,{icon:o}),Un(wn,{names:[i],labels:r}),this.shouldShowActionButton&&Un(Tn,{action:s,handleAction:t}))}get shouldShowActionButton(){const{isAllowedBuyAction:e,data:t}=this.props;return!(!e||!t.action)}}const jn=Re.createElement;class qn extends Re.PureComponent{render(){const{children:e}=this.props;return jn("div",{className:"_6x7yn"},e)}}const Yn=Re.createElement,{Component:Hn,createRef:Fn}=Re;class Wn extends Hn{constructor(...e){super(...e),De(this,"state",{code:""}),De(this,"textInput",Fn())}componentDidMount(){this.focusInput()}componentDidUpdate(e){e.disabled&&!this.props.disabled&&this.focusInput()}static getDerivedStateFromProps(e,t){const n=Wn.beautifyVerificationCode(e.code);return n===t.code?null:{code:n}}render(){const{id:e,label:t,disabled:n}=this.props;return Yn("div",{className:"_1hylq mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 myre_zn m7er_k4"},Yn("input",{ref:this.textInput,className:this.inputClassName,id:e,type:"tel",value:this.state.code,placeholder:t,autoComplete:"off",disabled:!!n,onChange:e=>this.handleChangeVerificationCode(e),onKeyDown:e=>this.handleKeyDown(e),onBlur:()=>this.handleBlur()}),Yn("label",{className:"_qrgxc",htmlFor:e},t))}static purifyVerificationCode(e){return e.replace(/[^\d]/gi,"")}static beautifyVerificationCode(e){return Wn.purifyVerificationCode(e).replace(/(.{3})/g,"$1 ").trim()}focusInput(){var e,t;dt()||null===(e=this.textInput)||void 0===e||null===(t=e.current)||void 0===t||t.focus()}handleChangeVerificationCode(e){const t=Wn.beautifyVerificationCode(e.target.value);this.props.code!==t&&this.sendCode(t),this.setState({code:t})}handleKeyDown(e){this.shouldStopTyping(e.key)&&e.preventDefault()}handleBlur(){const{onBlur:e}=this.props;e&&e()}shouldStopTyping(e){const t=Wn.purifyVerificationCode(this.state.code);return!Number.isNaN(Number(e))&&(null==t?void 0:t.length)>=this.props.codeLength}sendCode(e){this.props.onCodeChange(Wn.purifyVerificationCode(e))}get inputClassName(){return this.props.isCodeValid?"_14uqc _1tnz3 _cef89_JaqtA _1mrj4":this.props.isCodeInvalid?"_14uqc _1tnz3 _cef89_JaqtA _vf6li":"_14uqc _1tnz3"}}const Gn=Re.createElement,{Component:Kn}=Re;class $n extends Kn{constructor(...e){super(...e),De(this,"state",{isCodeValid:!1}),De(this,"label",Ye("BLIK code")),De(this,"id","ocb-blik-code-input"),De(this,"handleCodeChange",e=>{this.props.onCodeChange(e),this.setState({isCodeValid:this.isCodeValid(e)})})}render(){const{code:e,codeLength:t}=this.props;return Gn(Re.Fragment,null,Gn(Wn,{id:this.id,label:this.label,code:e,codeLength:t,isCodeValid:this.state.isCodeValid,onCodeChange:this.handleCodeChange}),Gn(qn,null,Gn("span",{className:"mpof_5r_m"},Ye("BLIK code can be found in your mobile bank app.")),Gn("span",{className:"mpof_5r mpof_uk_m"},Ye("BLIK code must be 1 digit long.",{count:this.props.codeLength}))))}isCodeValid(e){return e.length===this.props.codeLength}}const Qn=Re.createElement,{Component:Xn}=Re;class Jn extends Xn{render(){return Qn(qn,null,this.hint)}get hint(){const{hint:e,pricing:t,isPriceHidden:n}=this.props;return t&&!n?`${e} (${hn(Lt(t))}).`:e+"."}}let Zn;(e=>{e.BASE="base",e.FIRST_ADDRESS="najpierw_dane",e.NO_ICONS="bez_ikonek"})(Zn||(Zn={}));const ei=Re.createElement,{Component:ti}=Re;class ni extends ti{constructor(...e){super(...e),De(this,"state",{code:"",isConfirmButtonDisabled:!!this.props.showBlikInput}),De(this,"handleBuyButtonClick",()=>{const{code:e}=this.state;this.props.onConfirmOneClickBuyAction(e)}),De(this,"handleDeliveryTileAction",()=>{this.props.onTileAction(xe.CHANGE_DELIVERY,lt.CHANGE_PREFERRED_DELIVERY,ht.getParams())}),De(this,"handleInvoiceTileAction",()=>{this.props.onTileAction(xe.ADD_INVOICE,lt.ADD_INVOICE,ht.getParams())}),De(this,"handlePaymentTileAction",()=>{this.props.onTileAction(xe.CHANGE_PAYMENT,lt.CHANGE_PREFERRED_PAYMENT,ht.getParams())})}componentDidMount(){gt(xe.SHOW_DETAILS,void 0,ht.getParams())}render(){const{pricing:e,oneClickBuyParams:t,onTileLabelAction:n,sendInitialMobileLayerEvent:i,showBlikInput:o,isConfirmButtonProcessing:s,showButtonLabelSummary:r,removeRepresentativeExampleLabel:a}=this.props;return ei(Re.Fragment,null,ei("h4",{className:"mgmw_wo mli8_k4 mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_19 mgn2_21_s mryx_16"},Ye("Summary")),ei(Rn,{data:this.preferredDelivery,pricing:e,onTileAction:this.handleDeliveryTileAction,isAllowedBuyAction:!0,freebox:e.delivery.freebox,shouldHideTileIcon:this.shouldHideIconInTile,shouldChangeDisplayOrder:this.shouldChangeDisplayOrder}),ei(zn,{data:t.invoice,onTileAction:this.handleInvoiceTileAction,isAllowedBuyAction:!0,shouldHideTileIcon:this.shouldHideIconInTile}),ei(Mn,{data:t.paymentMethod,payment:e.payment,onTileAction:this.handlePaymentTileAction,onTileLabelAction:n,isAllowedBuyAction:!0,shouldHideTileIcon:this.shouldHideIconInTile,shouldChangeDisplayOrder:this.shouldChangeDisplayOrder,removeRepresentativeExampleLabel:a}),o&&ei("div",{className:"mryx_16"},ei($n,{code:this.state.code,codeLength:6,onCodeChange:e=>this.handleCodeChange(e)})),ei(En,{oneClickBuyParams:t,pricing:e,onConfirmOneClickBuyAction:this.handleBuyButtonClick,sendVisibilityEvents:!i,disabled:this.shouldDisableBuyButton,processing:s,showSummaryLabel:r}),ei(Jn,{hint:t.description.text,pricing:e,isPriceHidden:this.shouldHidePriceInHint}))}get shouldHideIconInTile(){const{experimentVariant:e}=this.props;return e===Zn.NO_ICONS}get shouldChangeDisplayOrder(){const{experimentVariant:e}=this.props;return e===Zn.FIRST_ADDRESS||e===Zn.NO_ICONS}get preferredDelivery(){const{pricing:e,oneClickBuyParams:t}=this.props;return t.deliveryMethods.find(({id:t})=>t===e.delivery.method.id)}handleCodeChange(e){this.setState({code:e,isConfirmButtonDisabled:6!==e.length})}get shouldDisableBuyButton(){return this.state.isConfirmButtonDisabled||!!this.props.isConfirmButtonProcessing}get shouldHidePriceInHint(){return xt(this.props.oneClickBuyParams.paymentMethod.id)}}const ii=Re.createElement,{Component:oi}=Re;class si extends oi{componentDidMount(){gt(this.props.action,this.props.offerId),this.changePreferences()}render(){return ii("div",{className:"mzmg_6m"},ii(zt,null),ii(Yt,null,ii(yn,null),ii("p",null,Ye("Wait..."))))}changePreferences(){const{action:e,offerId:t,pricing:n,isAllegroPayFlow:i}=this.props,o={offerId:t,hash:n.purchase.hash,actionType:e};Pt(o).then(e=>i&&e.id?((e,t)=>{const{offerId:n,hash:i,blikCode:o}=e,s="/purchases-with-selections-change?purchaseId="+t;return window.opbox.edge.post(s,{value:i,blikCode:o},ut()).then(e=>e.data).catch(e=>(mt(n,e),Promise.reject(e)))})(o,e.id).then(()=>e):e).then(t=>wt(t,e)).catch(e=>this.handleError(e))}handleError(e){switch(null==e?void 0:e.status){case 422:break;case 401:case 403:this.props.onNotLoggedError();break;default:this.props.onError()}}}const ri=Re.createElement,{Component:ai}=Re;class li extends ai{constructor(...e){super(...e),De(this,"handleConfirmButtonClick",()=>{ft(st.CLICK,"userUnderstandsError"),this.props.confirmHandler()})}componentDidMount(){gt(this.props.errorType)}render(){return ri(Re.Fragment,null,ri(zt,null,this.title),ri(Yt,null,this.content),ri(Wt,null,ri($t,null,ri("button",{className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mvrt_0 mh36_0",onClick:this.handleConfirmButtonClick},Ye("I understand")))))}get isBuyAndPayError(){return this.props.errorType===xe.BUY_ACTION_ERROR}get title(){return this.isBuyAndPayError?Ye("Unable to buy item"):Ye("Unexpected error has occurred")}get content(){return this.isBuyAndPayError?Ye("Money has not been withdrawn from your account. Add item to your basket and finish purchase."):Ye("Some error has occurred. If problem persists please contact us.")}}const _i=Re.createElement,{Component:ci}=Re;class ui extends ci{constructor(...e){super(...e),De(this,"redirectToLoginPage",()=>{const e=encodeURIComponent(window.location.href);window.location.assign(`${this.props.loginUrl}${e}`)})}componentDidMount(){gt(xe.NOT_LOGGED_ERROR)}render(){return _i(Re.Fragment,null,_i(zt,null,Ye("Log in again before purchasing")),_i(Yt,null,Ye("You have been away for a long time, that is why we want to make sure it is you. Please log in to your account.")),_i(Wt,{extraFooterPadding:!0},_i($t,null,_i("button",{className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7",onClick:this.redirectToLoginPage},Ye("Log in")))))}}const di=Re.createElement,{Component:mi}=Re;class hi extends mi{componentDidMount(){gt(xe.CANCEL_BUYING)}render(){return di(Re.Fragment,null,di(zt,null,Ye("Purchase has been discontinued")),di(Yt,null,Ye("You have cancelled the purchase and have not paid for this item.")),di(Wt,null,di($t,null,di("button",{className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mvrt_0 mh36_0",onClick:()=>this.props.onClose()},Ye("Close")))))}}const pi=Re.createElement,{Component:fi}=Re;class yi extends fi{constructor(...e){super(...e),De(this,"state",{code:"",isConfirmButtonDisabled:!0})}componentDidMount(){const{oneClickBuyParams:e,pricing:t}=this.props;gt(xe.BLIK_WITH_CODE),gt(xe.SHOW_DETAILS,void 0,{paymentMethodId:e.paymentMethod.id,deliveryMethodId:null==t?void 0:t.delivery.method.id})}render(){const{oneClickBuyParams:e,onCancel:t,pricing:n}=this.props;return pi("form",{onSubmit:e=>this.handleSubmit(e)},pi(zt,null,Ye("Enter BLIK code")),pi(Yt,null,pi("div",{className:"mryx_16"},Ye("BLIK code can be found in your mobile bank app.")),pi($n,{code:this.state.code,onCodeChange:e=>this.handleCodeChange(e),codeLength:6})),pi(Wt,{extraFooterPadding:!0},pi($t,{justifyContent:"space-between"},pi("button",{type:"button",className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mh36_0",onClick:()=>t()},Ye("Back")),pi("div",null,pi(En,{oneClickBuyParams:e,pricing:n,onConfirmOneClickBuyAction:()=>this.handleSubmit(),disabled:this.state.isConfirmButtonDisabled,type:"submit",showLabelWithoutPrice:!0}))),pi(Jn,{hint:e.description.text,pricing:n})))}handleSubmit(e){null==e||e.preventDefault(),this.state.isConfirmButtonDisabled||(Et({paymentMethodId:this.props.oneClickBuyParams.paymentMethod.id,deliveryMethodId:this.props.pricing.delivery.method.id}),this.props.onSubmit(this.state.code)),null==e||e.stopPropagation()}handleCodeChange(e){this.setState({code:e,isConfirmButtonDisabled:6!==e.length})}}const gi=Re.createElement,{Component:Ci}=Re;class Ei extends Ci{constructor(...e){super(...e),De(this,"closeIcon","https://assets.allegrostatic.com/sc-12853/statics/x_e5601f34.svg")}componentDidMount(){document.body.classList.add("meqh_en")}componentWillUnmount(){document.body.classList.remove("meqh_en")}render(){const{showCloseButton:e,disableCloseButton:t,onClose:n,children:i}=this.props;return gi("div",{id:"ocb-modal",className:this.modalCSS},gi("div",{className:"_otdh7 mjb5_pb mp7g_oz mq1m_0 mj7u_0 m7er_k4 mse2_k4 msts_ia _cef89_Mt65F",onClick:()=>{this.props.closeOnClickOutside&&n(!0)}}),gi("div",{className:"_fvroe _1yyhi m389_6m_s m7f5_6m_s"},gi("div",{className:"mjru_pc_s _3kk7b _vnd3k"},gi("div",{className:"_c2rl2 mjb5_w1 m7er_k4 msts_9u mryx_0 mp7g_oh"},e&&gi("button",{type:"button",className:"mgn2_14 mp0t_0a m9qz_yo mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mvrt_0 mh36_0 mp7g_f6 mnjl_0",onClick:()=>n(),disabled:t},gi("img",{className:"mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 isflp",src:this.closeIcon,alt:Ye("Close")})),gi("div",{className:this.modalContentCSS},i)))))}get modalCSS(){return"_1d2l9 _133zv mp7g_oz mjb5_w1 "+(this.props.isModalSticky?"mnjl_0 mqm6_0 mj7u_0":"mq1m_0 mnjl_0 mqm6_0 mj7u_0")}get modalContentCSS(){return`${this.props.disablePadding?"_9f0v0 mg9e_0 mvrt_0 mj7a_0 mh36_0":"_9f0v0 mh36_8 mh36_16_s mvrt_8 mvrt_16_s"} ${this.props.setMinimalHeight&&"mpof_ki myre_zn _cef89_RzG-f"}`}}var Ai,vi,bi,Ii,Ni,Pi;(e=>{e.DAY="day",e.MONTH="month"})(Ai||(Ai={})),(e=>{e.VISA="VISA",e.MASTERCARD="MASTERCARD",e.MAESTRO="MAESTRO",e.NOT_APPLICABLE="NOT_APPLICABLE"})(vi||(vi={})),(e=>{e.CARD="CARD",e.STORED_CARD="STORED_CARD",e.PBL="PBL",e.PEX="PEX",e.DELAY="DELAY",e.BLIK="BLIK",e.INSTALLMENTS="INSTALLMENTS",e.OFFLINE="OFFLINE",e.CREDIT="CREDIT",e.BUSINESS_PAY_LATER="BUSINESS_PAY_LATER",e.PAY_PAL="PAY_PAL",e.ANDROID_PAY="ANDROID_PAY",e.APPLE_PAY="APPLE_PAY"})(bi||(bi={})),(e=>{e.PAID="PAID",e.OVERPAID="OVERPAID",e.UNDERPAID="UNDERPAID",e.CREATED="CREATED",e.IN_PROGRESS="IN_PROGRESS",e.WAITING_FOR_MONEY="WAITING_FOR_MONEY",e.CANCELLED="CANCELLED",e.ERROR="ERROR",e.EXTERNAL_PAYMENT="EXTERNAL_PAYMENT"})(Ii||(Ii={})),(e=>{e.P24="P24",e.PAYU="PAYU",e.OFFLINE="OFFLINE",e.EPT="EPT"})(Ni||(Ni={})),(e=>{e.ALLEGRO="https://allegro.pl/regulamin/zalacznik_7b",e.P24="https://www.przelewy24.pl/regulamin"})(Pi||(Pi={}));const Si=Re.createElement,{PureComponent:wi}=Re;class ki extends wi{componentDidMount(){setTimeout(()=>{this.handleRedirect(_t.TIMEOUT)},3e4),setTimeout(()=>{At(_t.START),this.checkPaymentStatusUntilPaid()},5e3),gt(xe.CHECK_PAYMENT_STATUS)}render(){return Si(Re.Fragment,null,Si(zt,null,Ye("Confirm payment")),Si(Yt,null,Si("div",{className:"mpof_ki myre_zn m7f5_sf _cef89_lOh00"},Si("div",null,Ye("Open your bank application and confirm payment")),Si("div",{className:"mzmg_6m mp4t_16"},Si("img",{className:"m7er_80 mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 isflp",src:"https://assets.allegrostatic.com/sc-12853/statics/blik_adf7003a.svg",alt:Ye("BLIK illustration")})),Si(qn,null,Ye("Without confirmation payment will not be finalized.")))))}checkPaymentStatusUntilPaid(){var e;(e=this.props.paymentId,window.opbox.edge.get("/payments-status/"+e,ut()).then(({data:e})=>e)).then(({payment:{status:e}})=>{e!==Ii.IN_PROGRESS?this.handleRedirect(_t.COMPLETE):setTimeout(()=>{this.checkPaymentStatusUntilPaid()},2e3)}).catch(()=>{this.handleRedirect(_t.ERROR)})}handleRedirect(e){e&&At(e),window.location.assign("/transakcja/dziekujemy/"+this.props.purchaseId)}}const Li="/verificationService/smsVerification/payment",Ti=Re.createElement,{PureComponent:Oi}=Re;class Bi extends Oi{componentDidMount(){this.checkIfVerificationRequired()}render(){return Ti(Re.Fragment,null,Ti(zt,null),Ti(Yt,null,Ti("div",null,Ye("Wait...")),Ti(yn,null)))}async checkIfVerificationRequired(){var e;const t=await(n=this.context.services,n.get("opbox-transaction-profiling-service").then(e=>e.startProfiling({skipEligibilityCheck:!0})).catch(()=>Promise.resolve(void 0)));var n;(async(e,t)=>window.opbox.edge.put(`${Li}/${e}`,{},(e=>{const t=ut("application/vnd.allegro.internal.v2+json");return e?(t.headers["X-Attempt-Reference"]=e,t):t})(t)).then(({data:e})=>e))(null===(e=Nt.getData())||void 0===e?void 0:e.payment.paymentId,t).then(this.props.onVerification).catch(()=>{this.props.onVerification({smsVerificationRequired:!1})})}}De(Bi,"contextType",Ot);const Ri=Re.createElement,{PureComponent:Di}=Re;class xi extends Di{render(){const{phoneNumber:e}=this.props;return Ri("div",{className:"mryx_24"},Ye("We sent SMS verification code on {{phoneNumber}}. Enter it to confirm your identity.",{phoneNumber:Ri("strong",null,e)},!0))}}const Mi=Re.createElement,{PureComponent:Ui}=Re;class Vi extends Ui{render(){const{id:e,checked:t,label:n,disabled:i,onChange:o}=this.props;return Mi(Re.Fragment,null,Mi("input",{type:"checkbox",id:e,className:"mqen_m6 mp7g_f6 mp4t_16 mj6k_n7 chus5x cht266",checked:t,disabled:i,onChange:o}),Mi("label",{htmlFor:e,className:"mgmw_wo mpof_vs mqen_m6 mp7g_oh mp0t_0a chzhhh"},n))}}function zi(e,t,n=" "){let i;if("string"==typeof e&&-1!==e.indexOf(n))zi(e.split(n),t);else if("string"==typeof e||"number"==typeof e)t.push(""+e);else if("object"==typeof e)if(Array.isArray(e))for(i=0;i<e.length;i++)e[i]&&zi(e[i],t);else for(i in e)e[i]&&t.push(...i.split(" "))}const ji={nil:0,s:1,sm:1,m:2,md:2,l:3,lg:3,x:4,xl:4},qi=Object.keys(ji).length,Yi=ji.nil,Hi=/^[^_]+_[^_]+(_[^_]+)?$/,Fi=e=>"m"===e[0]&&Hi.test(e),Wi=e=>e?e in ji?ji[e]:ji[(""+e).substr(0,2)]||Number(e)||Yi:Yi,Gi=(e,t="_")=>{const n=e.indexOf(t),i=e.indexOf(t,n+2);return-1!=i?[e.slice(0,n),e.slice(n+1,i),e.slice(i+1,e.length)]:[e.slice(0,n),e.slice(n+1,e.length)]};var Ki=(...e)=>{var t;const n=((...e)=>{let t,n=0;const i=[];for(;n<e.length;)t=e[n++],t&&zi(t,i);return i})(e),i=[],o={};let s,r=n.length;for(;r>0;)if(s=n[--r],Fi(s)){const[e,n,r]=Gi(s),a=Wi(r),l=null!==(t=o[e])&&void 0!==t?t:o[e]=i.push(Array(qi))-1,_=i[l];_[a]=_[a]||[n,s]}else i.indexOf(s)<0&&i.push(s);return(e=>{let t,n,i,o="",s="",r=0,a=0;for(;r<e.length;){if(t=e[r++],"string"==typeof t)s=t;else for(s="",a=0,n=void 0;a<t.length;)i=t[a++],!i||n&&n[0]===i[0]||(n=i,s&&(s+=" "),s+=i[1]);o&&(o=" "+o),o=s+o}return o})(i)};const $i=Re.createElement;class Qi extends Re.Component{constructor(...e){super(...e),De(this,"state",{isVisible:this.props.shouldRender})}static getDerivedStateFromProps(e,t){return e.shouldRender&&e.shouldRender!==t.isVisible?{isVisible:e.shouldRender}:null}render(){const{children:e,shouldRender:t}=this.props,{isVisible:n}=this.state;return n?$i("div",{className:t?"_19cvm mjb5_zr msts_4u mp7g_f6 _cef89_kVuTw":"_19cvm mjb5_zr msts_4u mp7g_f6 _cef89_kVuTw mj6k_n7 _cef89_Kfi8E",onAnimationEnd:()=>this.handleAnimationEnd()},$i("div",{className:Ki("_9f0v0 mg9e_16_l mvrt_16_l mj7a_16_l mh36_16_l msts_4u")},$i("p",{className:"mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0"},e))):null}handleAnimationEnd(){this.props.shouldRender||this.setState({isVisible:!1})}}const Xi=Re.createElement,{PureComponent:Ji}=Re;class Zi extends Ji{constructor(...e){super(...e),De(this,"state",{smsCode:"",inputDirty:!1,verificationProcessing:!1,resendProcessing:!1,isCheckedSkipFutureVerification:this.props.skipFutureVerification,shouldRenderMessage:!1}),De(this,"handleConfirm",()=>{var e;this.setState({verificationProcessing:!0}),this.props.onProcessing(!0);const t=null===(e=Nt.getData())||void 0===e?void 0:e.payment.paymentId;var n;t&&(n=this.state.isCheckedSkipFutureVerification,It(st.CLICK,"buttonConfirm",n),(async(e,t,n)=>{const i=`${Li}/${e}/verify`;return window.opbox.edge.post(i,{code:t,skipFutureSmsVerification:n},ut()).catch(({data:e})=>Promise.reject(e))})(t,this.state.smsCode,this.state.isCheckedSkipFutureVerification).then(()=>{this.props.onVerified()}).catch(e=>{var t;const n=null==e||null===(t=e.errors)||void 0===t?void 0:t[0],i=Ye("The code is invalid. Please try to type it again."),o=(null==n?void 0:n.userMessage)||i;"INVALID_CODE"===(null==n?void 0:n.code)&&(e=>{It(st.BOX_INTERACTION,"wrongSMSCode",e)})(this.state.isCheckedSkipFutureVerification),this.setState({error:o}),this.setInputPristine()}).finally(()=>{this.setState({verificationProcessing:!1}),this.props.onProcessing(!1)}))}),De(this,"handleResendSms",()=>{var e;const t=null===(e=Nt.getData())||void 0===e?void 0:e.payment.paymentId;var n;this.setState({resendProcessing:!0,error:void 0}),t&&(n=this.state.isCheckedSkipFutureVerification,It(st.CLICK,"buttonSendNewCode",n),(e=>{const t=`${Li}/${e}/resend`;return window.opbox.edge.post(t,{},ut()).catch(({data:e})=>Promise.reject(e))})(t).then(()=>{this.setState({smsCode:""}),this.showResendMessage()}).catch(e=>{var t,n;const i=Ye("There is a problem with sending SMS code."),o=(null==e||null===(t=e.errors)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.userMessage)||i;this.setState({error:o})}).finally(()=>{this.setState({resendProcessing:!1}),this.setInputPristine(),this.props.onProcessing(!1)}))}),De(this,"handleSkipFutureVerificationChange",()=>{this.setState(e=>{const t=!e.isCheckedSkipFutureVerification;var n;return n=t,It(st.CLICK,"verificationSettingChange",n),{isCheckedSkipFutureVerification:t}}),this.validateSmsCode()}),De(this,"handleBlur",()=>{this.state.inputDirty&&this.validateSmsCode()}),De(this,"validateSmsCode",()=>{const{smsCode:e}=this.state;let t;0===e.length?t=Ye("The SMS code is required"):e.length<6&&(t=Ye("The SMS code is too short")),this.setState({error:t})}),De(this,"showResendMessage",()=>{this.setState({shouldRenderMessage:!0}),setTimeout(()=>{this.setState({shouldRenderMessage:!1})},3e3)})}componentDidMount(){var e;e=this.state.isCheckedSkipFutureVerification,It(st.BOX_VIEW,void 0,e)}componentWillUnmount(){this.props.onProcessing(!1)}render(){const{smsCode:e,verificationProcessing:t,resendProcessing:n,error:i,shouldRenderMessage:o}=this.state;return Xi(Re.Fragment,null,Xi(zt,null,Ye("Confirm its you")),Xi(Yt,null,Xi(xi,{phoneNumber:this.props.phoneNumber}),Xi(Wn,{id:"ocb-ap-verification-code-input",label:Ye("SMS code"),code:e,codeLength:6,disabled:this.isDisabled,isCodeInvalid:!!i,onCodeChange:e=>this.handleCodeChange(e),onBlur:this.handleBlur}),Xi(Qi,{shouldRender:o},Ye("We sent a new SMS code. Receive SMS.")),i&&Xi("div",{className:"_6x7yn mgmw_1p"},i),Xi(qn,null,Ye("The code must have 6 digits and it is valid for 3 minutes")),this.shouldShowSkipFutureVerificationCheckbox&&Xi("div",{className:"mp4t_8"},Xi(Vi,{id:"ocb-ap-skip-future-verification",checked:this.state.isCheckedSkipFutureVerification,label:Ye("Skip this step when possible"),disabled:this.isDisabled,onChange:this.handleSkipFutureVerificationChange}))),Xi(Wt,{extraFooterPadding:!0,divider:!1},Xi("div",{className:"mpof_ki myre_6m myre_8v_s m7f5_0a"},Xi("button",{type:"button",className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 m3h2_0 m3h2_8_s mp4t_8 mp4t_0_s",disabled:this.isDisabled,onClick:this.handleResendSms},n&&Xi(yn,null),Ye("Send new code")),Xi("button",{type:"button",className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7",onClick:this.handleConfirm,disabled:this.isConfirmButtonDisabled},t&&Xi(yn,null),Ye("Confirm")))))}handleCodeChange(e){this.setState({smsCode:e,error:void 0,inputDirty:!0})}get isDisabled(){return this.state.verificationProcessing||this.state.resendProcessing}get isConfirmButtonDisabled(){return this.isDisabled||this.state.smsCode.length<6||!!this.state.error}get shouldShowSkipFutureVerificationCheckbox(){return"boolean"==typeof this.state.isCheckedSkipFutureVerification}setInputPristine(){this.setState({inputDirty:!1})}}const eo=Re.createElement,{Component:to}=Re;class no extends to{constructor(...e){super(...e),De(this,"state",{action:this.props.action}),De(this,"handleBuyActionError",()=>this.setState({action:xe.BUY_ACTION_ERROR})),De(this,"handleChangePreferencesError",()=>this.setState({action:xe.CHANGE_PREFERENCES_ERROR})),De(this,"handleConfirmBuyAction",e=>{if(Et(ht.getParams()),e)this.handleBlikSubmit(e);else{const e=this.getNextConfirmBuyAction();this.setState({action:e})}}),De(this,"handleCancelBuyingAction",()=>this.setState({action:xe.CANCEL_BUYING})),De(this,"handleActionChange",(e,t,n)=>{this.setState({action:e,paymentId:n,purchaseId:t})}),De(this,"handleTileActionChange",(e,t,n)=>{const{offerId:i}=this.props;((e,t,n)=>{const i=n||{};ft(st.CLICK,e,t,i)})(t,i,Object.assign({},n,{origin:ct.OCB_DETAILS})),this.setState({action:e})}),De(this,"handleNotLoggedError",()=>{this.setState({action:xe.NOT_LOGGED_ERROR})}),De(this,"handleBlikSubmit",e=>this.setState({action:xe.BUY_AND_PAY,blikCode:e})),De(this,"handleModalClose",(e=!1)=>{var t;this.handleModalCloseEvent(e),this.state.action===xe.ALLEGRO_PAY_VERIFICATION?(t=this.state.allegroPaySkipFutureVerification,It(st.CLOSE,void 0,t),this.setState({action:xe.ALLEGRO_PAY})):this.props.onClose()}),De(this,"handleAllegroPayVerification",({smsVerificationRequired:e,phoneNumber:t,skipFutureSmsVerification:n})=>{(e=>{bt("AllegroPayFlow",e?"sms":"short")})(e),e?this.setState({action:xe.ALLEGRO_PAY_VERIFICATION,isAllegroPayWithVerification:!0,allegroPayVerificationPhoneNumber:t,allegroPaySkipFutureVerification:n}):this.setState({action:xe.BUY_AND_PAY})}),De(this,"handleAllegroPayCodeVerified",()=>{this.setState({action:xe.BUY_AND_PAY})}),De(this,"handleAllegroPayProcessing",e=>{this.setState({disableModalCloseButton:e})})}componentDidUpdate(e){const{action:t}=this.props;t!==e.action&&this.setState({action:t})}render(){return eo(Ei,{closeOnClickOutside:this.shouldShowCloseButton&&!this.state.disableModalCloseButton,showCloseButton:this.shouldShowCloseButton,disableCloseButton:this.state.disableModalCloseButton,disablePadding:this.shouldDisablePadding,isModalSticky:this.shouldModalBeSticky,setMinimalHeight:this.shouldSetModalMinimalHeight,onClose:this.handleModalClose},this.content)}get content(){var e;const{pricing:t,oneClickBuyParams:n,offerId:i,experimentVariant:o,tileLabelActionData:s}=this.props;switch(this.state.action){case xe.BUY_AND_PAY:return eo(mn,{onCancel:this.handleCancelBuyingAction,onError:this.handleBuyActionError,onNotLoggedError:this.handleNotLoggedError,onActionChange:this.handleActionChange,buyingDelaySeconds:this.buyAndPayDelayInSeconds,offerId:i,pricing:t,oneClickBuyParams:n,blikCode:this.state.blikCode,experimentVariant:o,shouldShowCancelButton:this.buyAndPayShowCancelButton});case xe.BLIK_WITH_CODE:return eo(yi,{oneClickBuyParams:n,pricing:t,onSubmit:this.handleBlikSubmit,onCancel:this.handleModalClose});case xe.SHOW_DETAILS:case xe.ALLEGRO_PAY:return eo(ni,{pricing:t,oneClickBuyParams:n,onConfirmOneClickBuyAction:this.handleConfirmBuyAction,onTileAction:this.handleTileActionChange,showBlikInput:Dt(n.paymentMethod.id),sendInitialMobileLayerEvent:!0,experimentVariant:o,showButtonLabelSummary:this.shouldShowButtonLabelSummary,removeRepresentativeExampleLabel:!0});case xe.ALLEGRO_PAY_IS_VERIFICATION_REQUIRED:return eo(Bi,{onVerification:this.handleAllegroPayVerification});case xe.ALLEGRO_PAY_VERIFICATION:return eo(Zi,{phoneNumber:this.state.allegroPayVerificationPhoneNumber,skipFutureVerification:this.state.allegroPaySkipFutureVerification,onVerified:this.handleAllegroPayCodeVerified,onProcessing:this.handleAllegroPayProcessing});case xe.CHANGE_DELIVERY:case xe.CHANGE_PAYMENT:case xe.ADD_INVOICE:return eo(si,{action:this.state.action,offerId:i,pricing:t,isAllegroPayFlow:this.isAllegroPayFlow,onError:this.handleChangePreferencesError,onNotLoggedError:this.handleNotLoggedError});case xe.CANCEL_BUYING:return eo(hi,{onClose:this.handleModalClose});case xe.NOT_LOGGED_ERROR:return eo(ui,{loginUrl:null===(e=this.props.urls)||void 0===e?void 0:e.login});case xe.BUY_ACTION_ERROR:case xe.CHANGE_PREFERENCES_ERROR:return eo(li,{confirmHandler:this.handleModalClose,errorType:this.state.action});case xe.CHECK_PAYMENT_STATUS:return eo(ki,{oneClickBuyParams:n,paymentId:this.state.paymentId,purchaseId:this.state.purchaseId});case xe.SHOW_DESCRIPTION_TEXT:return eo(Re.Fragment,null,eo(zt,null,null==s?void 0:s.title),eo(Yt,null,null==s?void 0:s.text));default:return null}}get shouldShowCloseButton(){switch(this.state.action){case xe.SHOW_DETAILS:case xe.BLIK_WITH_CODE:case xe.ALLEGRO_PAY:case xe.ALLEGRO_PAY_VERIFICATION:case xe.SHOW_DESCRIPTION_TEXT:return!0;default:return!1}}get shouldDisablePadding(){switch(this.state.action){case xe.SHOW_DETAILS:case xe.ALLEGRO_PAY:return!1;default:return!0}}get shouldModalBeSticky(){const{action:e}=this.props,t=[xe.BLIK_WITH_CODE,xe.ALLEGRO_PAY,xe.SHOW_DETAILS].includes(e);return dt()&&t}handleModalCloseEvent(e=!1){const{action:t}=this.state;t!==xe.ALLEGRO_PAY?vt(t,e):vt(xe.SHOW_DETAILS,e)}getNextConfirmBuyAction(){return Dt(this.props.oneClickBuyParams.paymentMethod.id)?xe.BLIK_WITH_CODE:this.state.action===xe.ALLEGRO_PAY?xe.ALLEGRO_PAY_IS_VERIFICATION_REQUIRED:xe.BUY_AND_PAY}get shouldSetModalMinimalHeight(){return this.isAllegroPayFlow&&this.state.action!==xe.ALLEGRO_PAY&&this.state.action!==xe.SHOW_DESCRIPTION_TEXT}get shouldShowButtonLabelSummary(){return this.isAllegroPayFlow}get isAllegroPayFlow(){return xt(this.props.oneClickBuyParams.paymentMethod.id)}get isBlikFlow(){return Dt(this.props.oneClickBuyParams.paymentMethod.id)}get buyAndPayDelayInSeconds(){return this.isBlikFlow||this.isAllegroPayFlow&&this.state.isAllegroPayWithVerification?0:this.props.oneClickBuyParams.buyingDelaySeconds}get buyAndPayShowCancelButton(){return!(this.isBlikFlow||this.isAllegroPayFlow&&this.state.isAllegroPayWithVerification)}}let io;(e=>{e.ACTIVE="ACTIVE",e.PREVIEW="PREVIEW",e.ENDED="ENDED"})(io||(io={}));const oo=Re.createElement,so=Re.createContext({language:"pl-PL"});function ro(e){return oo(so.Provider,Object.assign({value:{language:e.language}},e))}const ao=Re.createElement,{Component:lo}=Re;class _o extends lo{constructor(...e){super(...e),De(this,"state",{processing:!1})}render(){const{isAllowedBuyAction:e}=this.props,{processing:t}=this.state;return ao("button",{className:"mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7 m7er_k4",type:"button",onClick:()=>this.handleClick(),id:"buy-now-button",disabled:!e||t},t&&ao(yn,null),Ye("Buy now"))}handleClick(){const{offerId:e,quantity:t,onBuyNowActionError:n}=this.props;this.setState({processing:!0}),((e,t)=>{Ct(e,rt.BUY_NOW);const n={offer:{id:e,quantity:t}};return window.opbox.edge.post("/transaction-entry/buy-now",n,{responseType:"text",withCredentials:!0,headers:{Accept:"application/vnd.allegro.internal.v1+json","Content-Type":"application/vnd.allegro.internal.v1+json"}}).then(({data:e})=>e)})(e,t).then(e=>window.location.assign(e)).catch(()=>{this.setState({processing:!1}),n()})}}const co=Re.createElement,{Component:uo}=Re;let mo;(e=>{e[e.UNAVAILABLE_PRICING_UNAVAILABLE=0]="UNAVAILABLE_PRICING_UNAVAILABLE",e[e.UNAVAILABLE_PRICE_TOO_LOW=1]="UNAVAILABLE_PRICE_TOO_LOW",e[e.UNAVAILABLE_PRICE_TOO_HIGH=2]="UNAVAILABLE_PRICE_TOO_HIGH",e[e.UNAVAILABLE_QUANTITY_TOO_LOW=3]="UNAVAILABLE_QUANTITY_TOO_LOW",e[e.UNAVAILABLE_QUANTITY_TOO_HIGH=4]="UNAVAILABLE_QUANTITY_TOO_HIGH",e[e.AVAILABLE=5]="AVAILABLE"})(mo||(mo={}));class ho extends uo{render(){return co("div",{className:"mh36_24 mvrt_24 mg9e_8 mj7a_8"},co("p",{className:"mgmw_ag mzmg_6m"},this.unavailabilityReason))}get unavailabilityReason(){switch(this.props.status){case mo.UNAVAILABLE_PRICE_TOO_LOW:return this.props.constraints.price.min.reason;case mo.UNAVAILABLE_PRICE_TOO_HIGH:return this.props.constraints.price.max.reason;case mo.UNAVAILABLE_QUANTITY_TOO_LOW:return this.props.constraints.quantity.min.reason;case mo.UNAVAILABLE_QUANTITY_TOO_HIGH:return this.props.constraints.quantity.max.reason;default:return""}}}const po=Re.createElement,{Component:fo}=Re;class yo extends fo{render(){const{isAllowedBuyAction:e,pricing:t,offerId:n,quantity:i,oneClickBuyParams:o,onBuyNowActionError:s,isConfirmButtonProcessing:r,onConfirmOneClickBuyAction:a}=this.props,l=this.oneClickBuyAvailability;return l===mo.AVAILABLE?po(Re.Fragment,null,po(En,{oneClickBuyParams:o,pricing:t,onConfirmOneClickBuyAction:a,sendVisibilityEvents:!0,disabled:this.shouldDisableBuyButton,processing:r}),po(Jn,{hint:Ye('By selecting the button "Buy and pay" you will go to the summary. Your bank account will not be debited yet'),pricing:t,isPriceHidden:this.shouldHidePriceInHint})):po("div",null,po(ho,{constraints:o.constraints,status:l}),po(_o,{offerId:n,quantity:i,onBuyNowActionError:s,isAllowedBuyAction:e}))}get oneClickBuyAvailability(){const{pricing:e,quantity:t,oneClickBuyParams:n}=this.props;return t<n.constraints.quantity.min.value?mo.UNAVAILABLE_QUANTITY_TOO_LOW:t>n.constraints.quantity.max.value?mo.UNAVAILABLE_QUANTITY_TOO_HIGH:e?mo.AVAILABLE:t<this.props.availableQuantityRange.min?mo.UNAVAILABLE_PRICE_TOO_LOW:t>this.props.availableQuantityRange.max?mo.UNAVAILABLE_PRICE_TOO_HIGH:mo.UNAVAILABLE_PRICING_UNAVAILABLE}get shouldDisableBuyButton(){return!this.props.isAllowedBuyAction}get shouldHidePriceInHint(){return xt(this.props.oneClickBuyParams.paymentMethod.id)}}const go=Re.createElement,{Component:Co}=Re;class Eo extends Co{constructor(...e){super(...e),De(this,"state",{action:null,quantity:1,pricing:this.pricingQuantity(1),showBuyButtonHint:!1,isConfirmButtonProcessing:!1}),De(this,"confirmBuyActionHandler",()=>{const{oneClickBuyParams:e}=this.props;xt(e.paymentMethod.id)?this.handleAllegroPayBuyAction():this.setAction(xe.SHOW_DETAILS),this.sendPreBuyNowEvent()}),De(this,"buyNowActionErrorHandler",()=>this.setAction(xe.BUY_ACTION_ERROR)),De(this,"hideComponent",()=>this.setState({action:null,isConfirmButtonProcessing:!1})),De(this,"handleNotLoggedError",()=>this.setAction(xe.NOT_LOGGED_ERROR)),De(this,"handleChangePreferencesError",()=>this.setAction(xe.CHANGE_PREFERENCES_ERROR))}componentDidMount(){this.registerQuantityChangeListener(),this.setOneClickBuyButtonVisibleInStorage(),this.setShowBuyButtonHintState()}render(){const{oneClickBuyParams:e,offerId:t,implementationVariant:n,urls:i}=this.props,{action:o,quantity:s,pricing:r,tileLabelActionData:a,isConfirmButtonProcessing:l}=this.state,{availableQuantityRange:_}=this;return go(ro,this.props,go(Bt,this.props,go("section",{className:"mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4"},go(yo,{pricing:r,isAllowedBuyAction:this.isAllowedBuyAction,quantity:s,availableQuantityRange:_,offerId:t,oneClickBuyParams:e,onConfirmOneClickBuyAction:this.confirmBuyActionHandler,onBuyNowActionError:this.buyNowActionErrorHandler,isConfirmButtonProcessing:l}),!!o&&go(no,{pricing:r,oneClickBuyParams:e,offerId:t,onClose:this.hideComponent,action:o,experimentVariant:n,tileLabelActionData:a,urls:i}))))}registerQuantityChangeListener(){"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("showOfferQuantityChangeEvent",e=>{Nt.setData(void 0);const{quantity:t}=e.detail,n=this.pricingQuantity(t);this.setState({quantity:t,pricing:n})})}sendPreBuyNowEvent(){const{offerId:e}=this.props;Ct(e,rt.ONE_CLICK_BUY,ht.getParams())}get isAllowedBuyAction(){const{offerViewType:e}=this.props;return e===io.ACTIVE||e===io.PREVIEW}pricingQuantity(e){const{oneClickBuyParams:t,offerId:n}=this.props,i=t.pricing.find(({quantity:t})=>t===e);return ht.setParams(t,i,n),i}setOneClickBuyButtonVisibleInStorage(){var e;if(null!==(e=window)&&void 0!==e&&e.sessionStorage){const e=JSON.stringify({offerId:this.props.offerId});window.sessionStorage.setItem("OneClickBuyButtonVisible",e)}}get availableQuantityRange(){const e={};return this.props.oneClickBuyParams.pricing.forEach(({quantity:t})=>{e.min=void 0===e.min?t:Math.min(e.min,t),e.max=void 0===e.max?t:Math.max(e.max,t)}),e}setShowBuyButtonHintState(){const e=this.props.oneClickBuyParams.paymentMethod.id,t=Dt(e),n=xt(e);this.setState({showBuyButtonHint:!t&&!n&&!dt()})}setAction(e){this.setState({action:e})}handleAllegroPayBuyAction(){var e,t;const{offerId:n}=this.props;this.setState({isConfirmButtonProcessing:!0}),Pt({offerId:n,hash:null===(e=this.state.pricing)||void 0===e||null===(t=e.purchase)||void 0===t?void 0:t.hash,actionType:xe.BUY_AND_PAY}).then(()=>{this.setState({isConfirmButtonProcessing:!1}),this.setAction(xe.ALLEGRO_PAY)}).catch(e=>{switch(null==e?void 0:e.status){case 422:break;case 401:case 403:this.handleNotLoggedError();break;default:this.handleChangePreferencesError()}})}}const Ao=Re.createElement;window.opbox.component.register({prototypeName:"allegro.transaction.buyAndPay"},class{constructor({baseNode:e,props:t,services:n}){this.baseNode=e,this.props=t,this.services=n}onMount(){Ie(Ao(Eo,Object.assign({},this.props,{services:this.services})),this.baseNode)}})}}));
//# sourceMappingURL=index.es6-pl-PL_7270a4f4.js.map