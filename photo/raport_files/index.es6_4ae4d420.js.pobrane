((e,r)=>{for(var t in r)e[t]=r[t]})(window,(e=>{var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=(e,r,n)=>{t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=(e,r)=>{if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,(r=>e[r]).bind(null,i));return n},t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,"a",r),r},t.o=(e,r)=>({}.hasOwnProperty.call(e,r)),t.p="https://assets.allegrostatic.com/sc-17666/",t(t.s=0)})({0(e,r,t){e.exports=t("WdQY")},WdQY(e,r,t){t.r(r);var n=t("rRL6"),i=t.n(n);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(){return"serviceWorker"in window.navigator}function c(){if(!s())return Promise.reject();try{return window.navigator.serviceWorker.register("/service-worker.js").then(()=>window.navigator.serviceWorker.ready).catch(e=>(window.opbox.plugin.get("sentry").then(r=>r.captureException(e)).catch(()=>{console.error(e)}),Promise.reject()))}catch(e){return Promise.reject()}}function u(){if(!s())return Promise.resolve(void 0);try{return window.navigator.serviceWorker.getRegistration()}catch(e){return Promise.resolve(void 0)}}const a={headers:{Accept:"application/vnd.allegro.public.v1+json","Content-Type":"application/json"},withCredentials:!0};function p(){return s()&&"PushManager"in window}function l(e){return null!==e}function d(e){return void 0===e?Promise.resolve(null):e.pushManager.getSubscription()}function b(e){return void 0===e?Promise.reject():d(e).then(e=>l(e)?e.unsubscribe().then(()=>e.endpoint):Promise.reject())}function h(e){const{endpoint:r,keys:{auth:t,p256dh:n}={}}=e.toJSON();return window.opbox.edge.post("/notifications/subscriptions",{endpoint:r,auth:t,p256dh:n},a)}function v(e){return window.opbox.edge.post("/notifications/subscriptions/remove",{endpoint:e},a)}const{serviceWorkerConfiguration:g,applicationServerKey:w}=(({pluginName:e,clientImplementationVersion:r})=>{try{return JSON.parse(window.document.querySelector(`script[data-serialize-plugin-name="${e}"][data-civ="${r}"]`).textContent)}catch(t){return window.opbox.reportError(Error(`Missing serialized props of plugin "${e}", with civ "${r}"`)),{}}})({pluginName:"serviceWorker",clientImplementationVersion:i.a});g&&g.enabled&&w&&window.opbox.plugin.register({name:"serviceWorker"},new class{constructor({applicationServerKey:e}){o(this,"subscribeToWebPush",()=>(p()?new Promise((e,r)=>{const t=Notification.requestPermission(r=>{e(r)});t&&t.then(e,r)}).then(e=>{if("granted"!==e)throw Error("Permission not granted.")}):Promise.reject()).then(c).then(e=>((e,r)=>{const t={userVisibleOnly:!0,applicationServerKey:this.applicationServerKey};return e.pushManager.subscribe(t)})(e)).then(h)),o(this,"isSubscribedToWebPush",()=>u().then(d).then(l).catch(()=>!1)),o(this,"unsubscribeFromWebPush",()=>u().then(b).then(v)),o(this,"isWebPushSupported",()=>Promise.resolve(p())),o(this,"getPublicApi",()=>({subscribeToWebPush:this.subscribeToWebPush,isSubscribedToWebPush:this.isSubscribedToWebPush,unsubscribeFromWebPush:this.unsubscribeFromWebPush,isWebPushSupported:this.isWebPushSupported})),this.applicationServerKey=(e=>{const r=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(r),n=new Uint8Array(t.length);for(let i=0;i<t.length;i+=1)n[i]=t.charCodeAt(i);return n})(e)}}({window,applicationServerKey:w}).getPublicApi()),u().then(e=>{e&&"function"==typeof window.cm&&window.cm("send","event",{category:"Performance",label:"ServiceWorkerRegistered"})})},rRL6(e,r){e.exports="003"}}));
//# sourceMappingURL=index.es6_4ae4d420.js.map